import{o as v,c as y,a as P,b as e,d as E,r as Z,e as X,n as z,u as a,w as p,v as k,f as m,g as b,h as F,i as S,F as I,j as V,k as J,t as N,l as K,m as Q,p as q,q as tt}from"./runtime-dom.esm-bundler.9e7017fa.js";const M=(_,t)=>{const s=_.__vccOpts||_;for(const[i,r]of t)s[i]=r;return s},et={},st={fill:"#616A7A",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px"},it=e("path",{d:"M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 11 7 L 11 9 L 13 9 L 13 7 L 11 7 z M 11 11 L 11 17 L 13 17 L 13 11 L 11 11 z"},null,-1);function nt(_,t){return v(),y("svg",st,[P(" \\ "),it])}const A=M(et,[["render",nt]]),ot={},at={width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rt=e("path",{d:"M2.8732 0.224609L0 2.38838L5.50617 6.87605L0 11.3566L2.8732 13.5203L9.70509 7.95447L11.0305 6.87608L9.70509 5.7907L2.8732 0.224609Z",fill:"white"},null,-1),_t=[rt];function lt(_,t){return v(),y("svg",at,_t)}const $=M(ot,[["render",lt]]),dt={},ct={width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ht=e("path",{d:"M8.15658 14L11.0298 11.7814L5.52361 7.1799L11.0298 2.58578L8.15658 0.367145L1.3247 6.07413L-0.000706673 7.17986L1.3247 8.29277L8.15658 14Z",fill:"#616A7A"},null,-1),ut=[ht];function mt(_,t){return v(),y("svg",ct,ut)}const W=M(dt,[["render",mt]]),pt={},gt={width:"9",height:"13",viewBox:"0 0 9 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ft=e("path",{d:"M0.882812 3.95497L2.20377 5.11279L4.94344 2.89395L7.67873 5.11279L8.99969 3.95497L5.6018 1.2019L4.94346 0.667795L4.28085 1.2019L0.882812 3.95497Z",fill:"#616A7A"},null,-1),wt=e("path",{d:"M8.99951 9.18615L7.67856 8.02832L4.93889 10.2472L2.20359 8.02832L0.882636 9.18615L4.28052 11.9392L4.93887 12.4733L5.60148 11.9392L8.99951 9.18615Z",fill:"#616A7A"},null,-1),vt=[ft,wt];function yt(_,t){return v(),y("svg",gt,vt)}const D=M(pt,[["render",yt]]),bt={name:"HasError",props:{errors:{type:Object,required:!0},field:{type:String,required:!0},message:{type:String,default:"The above field is required."}}},xt=["innerHTML"];function zt(_,t,s,i,r,d){return s.errors.includes(s.field)?(v(),y("div",{key:0,class:"swizard__error",innerHTML:s.message},null,8,xt)):E("",!0)}const x=M(bt,[["render",zt]]),Pt={class:"smodal"},Ct={class:"smodal__body"},Lt={class:"swizard"},At={class:"sprogress-bar"},Et=e("div",{class:"sprogress-bar__step-number"},"1",-1),Mt=e("div",{class:"sprogress-bar__step-number"},"2",-1),kt=e("div",{class:"sprogress-bar__step-number"},"3",-1),St=e("div",{class:"sprogress-bar__step-number"},"4",-1),Dt={key:0,class:"swizard__step"},Tt=e("div",{class:"swizard__title"},[e("p",{class:"swizard__title__p text-center"}," Please enter your PPI Claim details "),e("hr",{class:"swizard__title__line"})],-1),Ut={class:"swizard__radio"},It=e("p",null," Were you required to complete a Self-Assessment the year you got your PPI refund? ",-1),Vt={class:"swizard__radio__items"},Nt={class:"swizard__radio__items__item"},$t=e("label",{for:"self_assesment_yes"},[e("span",null,"Yes ")],-1),Wt={class:"swizard__radio__items__item"},Bt=e("label",{for:"self_assesment_no"},"No",-1),Rt=e("div",{class:"swizard__title"},[e("p",{class:"swizard__title__p"}," Please provide us with the TOTAL amount you received for your PPI refunds in the relevant tax years below ")],-1),Ot={class:"swizard__years"},Ft={class:"swizard__years__items"},qt=e("p",null,"Apr 2018 - Mar 2019",-1),jt={class:"swizard__years__items__item"},Ht=e("span",{class:"swizard__years__items__item__left-icon"},"\xA3",-1),Yt={class:"swizard__years__items__item__right-icon"},Gt={class:"swizard__years__items"},Zt=e("p",null,"Apr 2019 - Mar 2020",-1),Xt={class:"swizard__years__items__item"},Jt=e("span",{class:"swizard__years__items__item__left-icon"},"\xA3",-1),Kt={class:"swizard__years__items__item__right-icon"},Qt={class:"swizard__years__items"},te=e("p",null,"Apr 2020 - Mar 2021",-1),ee={class:"swizard__years__items__item"},se=e("span",{class:"swizard__years__items__item__left-icon"},"\xA3",-1),ie={class:"swizard__years__items__item__right-icon"},ne={class:"swizard__years__items"},oe=e("p",null,"Apr 2021 - Mar 2022",-1),ae={class:"swizard__years__items__item"},re=e("span",{class:"swizard__years__items__item__left-icon"},"\xA3",-1),_e={class:"swizard__years__items__item__right-icon"},le={class:"swizard__radio"},de=e("p",null," Were you earning less than \xA350,000.00 a year at the time you received your PPI refund? ",-1),ce={class:"swizard__radio__items"},he={class:"swizard__radio__items__item"},ue=e("label",{for:"less_earning"},"Yes",-1),me={class:"swizard__radio__items__item"},pe=e("label",{for:"more_earning"},"No",-1),ge={class:"swizard__input"},fe=e("p",null,"National insurance (NI) Number",-1),we={class:"swizard__input__item"},ve={class:"swizard__input__item__right-icon"},ye={class:"swizard__sign__checkbox"},be=e("label",{for:"cant_remember"},"Can't remember (Provide it later) ",-1),xe={class:"swizard__submit"},ze={class:"sbutton__primary__icon"},Pe={key:1,class:"swizard__step"},Ce=e("div",{class:"swizard__title"},[e("p",{class:"swizard__title__p text-center"}," Please complete your details below to start your claim "),e("hr",{class:"swizard__title__line"})],-1),Le={class:"swizard__about"},Ae={class:"swizard__input swizard__about__item"},Ee=e("p",null,"Title",-1),Me={class:"swizard__input__item"},ke=e("option",{value:null},"Select",-1),Se=e("option",{value:"Nr."},"Mr.",-1),De=e("option",{value:"Mrs."},"Mrs.",-1),Te=[ke,Se,De],Ue={class:"swizard__input__item__right-icon"},Ie={class:"swizard__input swizard__about__item"},Ve=e("p",null,"First Name",-1),Ne={class:"swizard__input__item"},$e={class:"swizard__input swizard__about__item"},We=e("p",null,"Last Name",-1),Be={class:"swizard__input__item"},Re=e("p",null,"DOB",-1),Oe={class:"swizard__about"},Fe={class:"swizard__input swizard__about__item"},qe={class:"swizard__input__item"},je=e("option",{value:null},"Day",-1),He=["value"],Ye={class:"swizard__input__item__right-icon"},Ge={class:"swizard__input swizard__about__item"},Ze={class:"swizard__input__item"},Xe=e("option",{value:null},"Month",-1),Je=["value"],Ke={class:"swizard__input__item__right-icon"},Qe={class:"swizard__input swizard__about__item"},ts={class:"swizard__input__item"},es=e("option",{value:null},"Year",-1),ss=["value"],is={class:"swizard__input__item__right-icon"},ns={class:"swizard__submit"},os={class:"sbutton__primary__icon"},as={class:"sbutton__primary__back"},rs={key:2,class:"swizard__step"},_s=e("div",{class:"swizard__title"},[e("p",{class:"swizard__title__p text-center"}," Enter your contact details to claim your tax back "),e("hr",{class:"swizard__title__line"})],-1),ls={class:"swizard__input"},ds=e("p",null,"Email",-1),cs={class:"swizard__input__item"},hs={class:"swizard__input"},us=e("p",null,"Phone Number",-1),ms={class:"swizard__input__item"},ps={class:"swizard__input"},gs=e("p",null,"Address",-1),fs={class:"swizard__input__item"},ws={class:"swizard__input"},vs=e("p",null,"Postcode",-1),ys={class:"swizard__input__item"},bs={class:"swizard__sign__checkbox"},xs=e("label",{for:"agreed"},[e("small",null,"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes.")],-1),zs={class:"swizard__submit"},Ps={class:"sbutton__primary__icon"},Cs={class:"sbutton__primary__back"},Ls={key:3,class:"swizard__step"},As=J('<div class="swizard__claim swizard__title"><h3>Great News!</h3><p class="swizard__claim__congrat"><span class="swizard__claim__success">Congratulations, </span> You 100% meet the criteria </p><p class="swizard__claim__time"> Our customers get money back in 6 Weeks! </p><hr class="swizard__title__line"></div><div class="swizard__claim__message"><p> Signing below agrees you into our <span class="swizard__claim__message__terms">terms and conditions</span> and our NO WIN NO FEE services. </p></div>',2),Es={class:"swizard__input"},Ms=e("p",null,"Do you have a referral code? (optional)",-1),ks={class:"swizard__input__item"},Ss={class:"swizard__input"},Ds=e("p",null,"Please draw your signature below in the green box.",-1),Ts={class:"swizard__input__item"},Us=e("small",null,"Clear Signature",-1),Is={class:"swizard__submit"},Vs=e("button",{type:"button",class:"sbutton sbutton__primary sbutton--active"}," Start Your Claim ",-1),Ns={class:"sbutton__primary__back"},$s={__name:"App",setup(_){let t=Z({step:3,errors:[],required:[["self_assesment","year","less_earning","ni_number"],["name","dob"],["email","phone","address","postcode","agree","signature"]],form:[{self_assesment:null,year_2019:null,year_2020:null,year_2021:null,year_2022:null,less_earning:null,ni_number:null,cant_remember:null},{title:null,first_name:null,last_name:null,day:null,month:null,year:null},{email:null,phone:null,address:null,postcode:null,agree:null},{referal_code:null,signature:null}]});X(()=>{});function s(){const d=Object.values(t.required[t.step-1]),o=t.form[t.step-1];d.includes("ni_number")&&o.cant_remember&&d.splice(d.indexOf("ni_number"),1);const l=Object.keys(Object.fromEntries(Object.entries(o).filter(([c,h])=>h==null||h=="")));let n=l.filter(c=>d.includes(c));return["year_2019","year_2020","year_2021","year_2022"].every(c=>l.includes(c))&&n.push("year"),t.step==2&&(console.log(l),["title","first_name","last_name"].some(c=>l.includes(c))&&n.push("name"),["day","month","year"].some(c=>l.includes(c))&&n.push("dob")),t.errors=[...n],!t.errors.length}function i(){s()&&t.step>=1&&t.step<=4&&t.step++}function r(){t.step>=1&&t.step<=4&&t.step--}return(d,o)=>{const l=K("VueSignaturePad");return v(),y("div",Pt,[e("div",Ct,[e("div",Lt,[e("div",At,[e("div",{class:z(["sprogress-bar__step",{"sprogress-bar__step--complete":a(t).step>=2,"sprogress-bar__step--active":a(t).step>0}])},[e("p",{class:z(["sprogress-bar__step__text",{"sprogress-bar__step__text--active":a(t).step>0}])}," PPI Claim Details ",2),Et],2),e("div",{class:z(["sprogress-bar__step",{"sprogress-bar__step--complete":a(t).step>=3,"sprogress-bar__step--active":a(t).step>=2}])},[e("p",{class:z(["sprogress-bar__step__text",{"sprogress-bar__step__text--active":a(t).step>=2}])}," About You ",2),Mt],2),e("div",{class:z(["sprogress-bar__step",{"sprogress-bar__step--complete":a(t).step>=4,"sprogress-bar__step--active":a(t).step>=3}])},[e("p",{class:z(["sprogress-bar__step__text",{"sprogress-bar__step__text--active":a(t).step>=3}])}," Contact Details ",2),kt],2),e("div",{class:z(["sprogress-bar__step",{"sprogress-bar__step--complete":a(t).step>4,"sprogress-bar__step--active":a(t).step>=4}])},[e("p",{class:z(["sprogress-bar__step__text",{"sprogress-bar__step__text--active":a(t).step>=4}])}," Start Claim ",2),St],2)]),a(t).step==1?(v(),y("div",Dt,[Tt,e("div",Ut,[It,e("div",Vt,[e("div",Nt,[p(e("input",{id:"self_assesment_yes",type:"radio","onUpdate:modelValue":o[0]||(o[0]=n=>a(t).form[0].self_assesment=n),name:"self_assesment",value:!0},null,512),[[k,a(t).form[0].self_assesment]]),$t]),e("div",Wt,[p(e("input",{id:"self_assesment_no",type:"radio","onUpdate:modelValue":o[1]||(o[1]=n=>a(t).form[0].self_assesment=n),name:"self_assesment",value:!1},null,512),[[k,a(t).form[0].self_assesment]]),Bt])]),m(x,{field:"self_assesment",errors:a(t).errors},null,8,["errors"])]),Rt,e("div",Ot,[e("div",Ft,[qt,e("div",jt,[Ht,p(e("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=n=>a(t).form[0].year_2019=n),class:"swizard__years__items__item__box hide-arrows"},null,512),[[b,a(t).form[0].year_2019]]),e("span",Yt,[m(A)])])]),e("div",Gt,[Zt,e("div",Xt,[Jt,p(e("input",{type:"number","onUpdate:modelValue":o[3]||(o[3]=n=>a(t).form[0].year_2020=n),class:"swizard__years__items__item__box hide-arrows"},null,512),[[b,a(t).form[0].year_2020]]),e("span",Kt,[m(A)])])]),e("div",Qt,[te,e("div",ee,[se,p(e("input",{type:"number","onUpdate:modelValue":o[4]||(o[4]=n=>a(t).form[0].year_2021=n),class:"swizard__years__items__item__box hide-arrows"},null,512),[[b,a(t).form[0].year_2021]]),e("span",ie,[m(A)])])]),e("div",ne,[oe,e("div",ae,[re,p(e("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=n=>a(t).form[0].year_2022=n),class:"swizard__years__items__item__box hide-arrows"},null,512),[[b,a(t).form[0].year_2022]]),e("span",_e,[m(A)])])]),m(x,{field:"year",errors:a(t).errors,message:"Please fill at least one record"},null,8,["errors"])]),e("div",le,[de,e("div",ce,[e("div",he,[p(e("input",{id:"less_earning",type:"radio",name:"less_earning",value:!0,"onUpdate:modelValue":o[6]||(o[6]=n=>a(t).form[0].less_earning=n)},null,512),[[k,a(t).form[0].less_earning]]),ue]),e("div",me,[p(e("input",{id:"more_earning",type:"radio",name:"less_earning",value:!1,"onUpdate:modelValue":o[7]||(o[7]=n=>a(t).form[0].less_earning=n)},null,512),[[k,a(t).form[0].less_earning]]),pe])]),m(x,{field:"less_earning",errors:a(t).errors},null,8,["errors"])]),e("div",ge,[fe,e("div",we,[p(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=n=>a(t).form[0].ni_number=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[0].ni_number]]),e("span",ve,[m(A)])])]),e("div",ye,[p(e("input",{id:"cant_remember",type:"checkbox",value:!0,"onUpdate:modelValue":o[9]||(o[9]=n=>a(t).form[0].cant_remember=n)},null,512),[[F,a(t).form[0].cant_remember]]),be]),m(x,{field:"ni_number",errors:a(t).errors},null,8,["errors"]),e("div",xe,[e("button",{type:"button",class:"sbutton sbutton__primary sbutton--active",onClick:i},[P(" Continue "),e("span",ze,[m($)])])])])):E("",!0),a(t).step==2?(v(),y("div",Pe,[Ce,e("div",Le,[e("div",Ae,[Ee,e("div",Me,[p(e("select",{"onUpdate:modelValue":o[10]||(o[10]=n=>a(t).form[1].title=n),class:"swizard__input__item__box"},Te,512),[[S,a(t).form[1].title]]),e("span",Ue,[m(D)])])]),e("div",Ie,[Ve,e("div",Ne,[p(e("input",{"onUpdate:modelValue":o[11]||(o[11]=n=>a(t).form[1].first_name=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[1].first_name]])])]),e("div",$e,[We,e("div",Be,[p(e("input",{"onUpdate:modelValue":o[12]||(o[12]=n=>a(t).form[1].last_name=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[1].last_name]])])])]),m(x,{field:"name",errors:a(t).errors,message:"The above fields are required"},null,8,["errors"]),Re,e("div",Oe,[e("div",Fe,[e("div",qe,[p(e("select",{"onUpdate:modelValue":o[13]||(o[13]=n=>a(t).form[1].day=n),class:"swizard__input__item__box"},[je,(v(),y(I,null,V(31,n=>e("option",{value:n,key:n},N(n),9,He)),64))],512),[[S,a(t).form[1].day]]),e("span",Ye,[m(D)])])]),e("div",Ge,[e("div",Ze,[p(e("select",{"onUpdate:modelValue":o[14]||(o[14]=n=>a(t).form[1].month=n),class:"swizard__input__item__box"},[Xe,(v(),y(I,null,V(12,n=>e("option",{value:n,key:n},N(n),9,Je)),64))],512),[[S,a(t).form[1].month]]),e("span",Ke,[m(D)])])]),e("div",Qe,[e("div",ts,[p(e("select",{"onUpdate:modelValue":o[15]||(o[15]=n=>a(t).form[1].year=n),class:"swizard__input__item__box"},[es,(v(),y(I,null,V(101,n=>e("option",{value:n,key:n},N(new Date().getFullYear()-n+1),9,ss)),64))],512),[[S,a(t).form[1].year]]),e("span",is,[m(D)])])])]),m(x,{field:"dob",errors:a(t).errors,message:"The above fields are required"},null,8,["errors"]),e("div",ns,[e("button",{type:"button",class:"sbutton sbutton__primary sbutton--active",onClick:i},[P(" Continue "),e("span",os,[m($)])]),e("button",{type:"button",onClick:r,class:"sbutton sbutton__back"},[e("span",as,[m(W)]),P("Back ")])])])):E("",!0),a(t).step==3?(v(),y("div",rs,[_s,e("div",ls,[ds,e("div",cs,[p(e("input",{type:"text","onUpdate:modelValue":o[16]||(o[16]=n=>a(t).form[2].email=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[2].email]])]),m(x,{field:"email",errors:a(t).errors},null,8,["errors"])]),e("div",hs,[us,e("div",ms,[p(e("input",{type:"text","onUpdate:modelValue":o[17]||(o[17]=n=>a(t).form[2].phone=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[2].phone]])]),m(x,{field:"phone",errors:a(t).errors},null,8,["errors"])]),e("div",ps,[gs,e("div",fs,[p(e("input",{type:"text","onUpdate:modelValue":o[18]||(o[18]=n=>a(t).form[2].address=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[2].address]])]),m(x,{field:"address",errors:a(t).errors},null,8,["errors"])]),e("div",ws,[vs,e("div",ys,[p(e("input",{type:"text","onUpdate:modelValue":o[19]||(o[19]=n=>a(t).form[2].postcode=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[2].postcode]])]),m(x,{field:"postcode",errors:a(t).errors},null,8,["errors"])]),e("div",bs,[p(e("input",{id:"agreed",type:"checkbox",value:1,"onUpdate:modelValue":o[20]||(o[20]=n=>a(t).form[2].agree=n)},null,512),[[F,a(t).form[2].agree]]),xs]),m(x,{field:"agree",errors:a(t).errors},null,8,["errors"]),e("div",zs,[e("button",{type:"button",class:"sbutton sbutton__primary sbutton--active",onClick:i},[P(" Continue "),e("span",Ps,[m($)])]),e("button",{type:"button",onClick:r,class:"sbutton sbutton__back"},[e("span",Cs,[m(W)]),P(" Back ")])])])):E("",!0),a(t).step==4?(v(),y("div",Ls,[As,e("div",Es,[Ms,e("div",ks,[p(e("input",{"onUpdate:modelValue":o[21]||(o[21]=n=>a(t).form[3].referal_code=n),class:"swizard__input__item__box"},null,512),[[b,a(t).form[3].referal_code]])])]),e("div",Ss,[Ds,e("div",Ts,[m(l,{width:"500px",height:"500px",ref:"signaturePad"},null,512)])]),Us,e("div",Is,[Vs,e("button",{type:"button",onClick:r,class:"sbutton sbutton__back"},[e("span",Ns,[m(W)]),P(" Back ")])])])):E("",!0)])])])}}};/*!
 * Signature Pad v3.0.0-beta.4 | https://github.com/szimek/signature_pad
 * (c) 2020 Szymon Nowak | Released under the MIT license
 */class T{constructor(t,s,i){this.x=t,this.y=s,this.time=i||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class R{constructor(t,s,i,r,d,o){this.startPoint=t,this.control2=s,this.control1=i,this.endPoint=r,this.startWidth=d,this.endWidth=o}static fromPoints(t,s){const i=this.calculateControlPoints(t[0],t[1],t[2]).c2,r=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new R(t[1],i,r,t[2],s.start,s.end)}static calculateControlPoints(t,s,i){const r=t.x-s.x,d=t.y-s.y,o=s.x-i.x,l=s.y-i.y,n={x:(t.x+s.x)/2,y:(t.y+s.y)/2},c={x:(s.x+i.x)/2,y:(s.y+i.y)/2},h=Math.sqrt(r*r+d*d),f=Math.sqrt(o*o+l*l),C=n.x-c.x,w=n.y-c.y,u=f/(h+f),g={x:c.x+C*u,y:c.y+w*u},L=s.x-g.x,O=s.y-g.y;return{c1:new T(n.x+L,n.y+O),c2:new T(c.x+L,c.y+O)}}length(){let s=0,i,r;for(let d=0;d<=10;d+=1){const o=d/10,l=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),n=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(d>0){const c=l-i,h=n-r;s+=Math.sqrt(c*c+h*h)}i=l,r=n}return s}point(t,s,i,r,d){return s*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*r*(1-t)*t*t+d*t*t*t}}function Ws(_,t=250){let s=0,i=null,r,d,o;const l=()=>{s=Date.now(),i=null,r=_.apply(d,o),i||(d=null,o=[])};return function(...c){const h=Date.now(),f=t-(h-s);return d=this,o=c,f<=0||f>t?(i&&(clearTimeout(i),i=null),s=h,r=_.apply(d,o),i||(d=null,o=[])):i||(i=window.setTimeout(l,f)),r}}class U{constructor(t,s={}){this.canvas=t,this.options=s,this._handleMouseDown=i=>{i.which===1&&(this._mouseButtonDown=!0,this._strokeBegin(i))},this._handleMouseMove=i=>{this._mouseButtonDown&&this._strokeMoveUpdate(i)},this._handleMouseUp=i=>{i.which===1&&this._mouseButtonDown&&(this._mouseButtonDown=!1,this._strokeEnd(i))},this._handleTouchStart=i=>{if(i.preventDefault(),i.targetTouches.length===1){const r=i.changedTouches[0];this._strokeBegin(r)}},this._handleTouchMove=i=>{i.preventDefault();const r=i.targetTouches[0];this._strokeMoveUpdate(r)},this._handleTouchEnd=i=>{if(i.target===this.canvas){i.preventDefault();const d=i.changedTouches[0];this._strokeEnd(d)}},this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._strokeMoveUpdate=this.throttle?Ws(U.prototype._strokeUpdate,this.throttle):U.prototype._strokeUpdate,this._ctx=t.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:t,canvas:s}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,s.width,s.height),t.fillRect(0,0,s.width,s.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(t,s={},i){const r=new Image,d=s.ratio||window.devicePixelRatio||1,o=s.width||this.canvas.width/d,l=s.height||this.canvas.height/d;this._reset(),r.onload=()=>{this._ctx.drawImage(r,0,0,o,l),i&&i()},r.onerror=n=>{i&&i(n)},r.src=t,this._isEmpty=!1}toDataURL(t="image/png",s){switch(t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,s)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t){this.clear(),this._fromData(t,({color:s,curve:i})=>this._drawCurve({color:s,curve:i}),({color:s,point:i})=>this._drawDot({color:s,point:i})),this._data=t}toData(){return this._data}_strokeBegin(t){const s={color:this.penColor,points:[]};typeof this.onBegin=="function"&&this.onBegin(t),this._data.push(s),this._reset(),this._strokeUpdate(t)}_strokeUpdate(t){if(this._data.length===0){this._strokeBegin(t);return}const s=t.clientX,i=t.clientY,r=this._createPoint(s,i),d=this._data[this._data.length-1],o=d.points,l=o.length>0&&o[o.length-1],n=l?r.distanceTo(l)<=this.minDistance:!1,c=d.color;if(!l||!(l&&n)){const h=this._addPoint(r);l?h&&this._drawCurve({color:c,curve:h}):this._drawDot({color:c,point:r}),o.push({time:r.time,x:r.x,y:r.y})}}_strokeEnd(t){this._strokeUpdate(t),typeof this.onEnd=="function"&&this.onEnd(t)}_handlePointerEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}_handleMouseEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(t,s){const i=this.canvas.getBoundingClientRect();return new T(t-i.left,s-i.top,new Date().getTime())}_addPoint(t){const{_lastPoints:s}=this;if(s.push(t),s.length>2){s.length===3&&s.unshift(s[0]);const i=this._calculateCurveWidths(s[1],s[2]),r=R.fromPoints(s,i);return s.shift(),r}return null}_calculateCurveWidths(t,s){const i=this.velocityFilterWeight*s.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(i),d={end:r,start:this._lastWidth};return this._lastVelocity=i,this._lastWidth=r,d}_strokeWidth(t){return Math.max(this.maxWidth/(t+1),this.minWidth)}_drawCurveSegment(t,s,i){const r=this._ctx;r.moveTo(t,s),r.arc(t,s,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve({color:t,curve:s}){const i=this._ctx,r=s.endWidth-s.startWidth,d=Math.floor(s.length())*2;i.beginPath(),i.fillStyle=t;for(let o=0;o<d;o+=1){const l=o/d,n=l*l,c=n*l,h=1-l,f=h*h,C=f*h;let w=C*s.startPoint.x;w+=3*f*l*s.control1.x,w+=3*h*n*s.control2.x,w+=c*s.endPoint.x;let u=C*s.startPoint.y;u+=3*f*l*s.control1.y,u+=3*h*n*s.control2.y,u+=c*s.endPoint.y;const g=Math.min(s.startWidth+c*r,this.maxWidth);this._drawCurveSegment(w,u,g)}i.closePath(),i.fill()}_drawDot({color:t,point:s}){const i=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;i.beginPath(),this._drawCurveSegment(s.x,s.y,r),i.closePath(),i.fillStyle=t,i.fill()}_fromData(t,s,i){for(const r of t){const{color:d,points:o}=r;if(o.length>1)for(let l=0;l<o.length;l+=1){const n=o[l],c=new T(n.x,n.y,n.time);this.penColor=d,l===0&&this._reset();const h=this._addPoint(c);h&&s({color:d,curve:h})}else this._reset(),i({color:d,point:o[0]})}}_toSVG(){const t=this._data,s=Math.max(window.devicePixelRatio||1,1),i=0,r=0,d=this.canvas.width/s,o=this.canvas.height/s,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width",this.canvas.width.toString()),l.setAttribute("height",this.canvas.height.toString()),this._fromData(t,({color:w,curve:u})=>{const g=document.createElement("path");if(!isNaN(u.control1.x)&&!isNaN(u.control1.y)&&!isNaN(u.control2.x)&&!isNaN(u.control2.y)){const L=`M ${u.startPoint.x.toFixed(3)},${u.startPoint.y.toFixed(3)} C ${u.control1.x.toFixed(3)},${u.control1.y.toFixed(3)} ${u.control2.x.toFixed(3)},${u.control2.y.toFixed(3)} ${u.endPoint.x.toFixed(3)},${u.endPoint.y.toFixed(3)}`;g.setAttribute("d",L),g.setAttribute("stroke-width",(u.endWidth*2.25).toFixed(3)),g.setAttribute("stroke",w),g.setAttribute("fill","none"),g.setAttribute("stroke-linecap","round"),l.appendChild(g)}},({color:w,point:u})=>{const g=document.createElement("circle"),L=typeof this.dotSize=="function"?this.dotSize():this.dotSize;g.setAttribute("r",L.toString()),g.setAttribute("cx",u.x.toString()),g.setAttribute("cy",u.y.toString()),g.setAttribute("fill",w),l.appendChild(g)});const n="data:image/svg+xml;base64,",c=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="${i} ${r} ${d} ${o}" width="${d}" height="${o}">`;let h=l.innerHTML;if(h===void 0){const w=document.createElement("dummy"),u=l.childNodes;w.innerHTML="";for(let g=0;g<u.length;g+=1)w.appendChild(u[g].cloneNode(!0));h=w.innerHTML}const f="</svg>",C=c+h+f;return n+btoa(C)}}var Bs={format:"image/png",quality:.92,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0},j=function(_,t){return _===void 0&&(_=[]),t===void 0&&(t={}),new Promise(function(s){t=Object.assign({},Bs,t);var i=t.Canvas?new t.Canvas:window.document.createElement("canvas"),r=t.Canvas?t.Canvas.Image:window.Image;t.Canvas&&(t.quality*=100);var d=_.map(function(l){return new Promise(function(n,c){l.constructor.name!=="Object"&&(l={src:l});var h=new r;h.crossOrigin=t.crossOrigin,h.onerror=function(){return c(new Error("Couldn't load image"))},h.onload=function(){return n(Object.assign({},l,{img:h}))},h.src=l.src})}),o=i.getContext("2d");s(Promise.all(d).then(function(l){var n=function(c){return t[c]||Math.max.apply(Math,l.map(function(h){return h.img[c]}))};return i.width=n("width"),i.height=n("height"),l.forEach(function(c){return o.globalAlpha=c.opacity?c.opacity:1,o.drawImage(c.img,c.x||0,c.y||0)}),t.Canvas&&t.format==="image/jpeg"?new Promise(function(c){i.toDataURL(t.format,{quality:t.quality,progressive:!1},function(h,f){if(h)throw h;c(f)})}):i.toDataURL(t.format,t.quality)}))})};const B=["image/png","image/jpeg","image/svg+xml"],Rs=_=>B.includes(_),Os={dotSize:(.5+2.5)/2,minWidth:.5,maxWidth:2.5,throttle:16,minDistance:5,backgroundColor:"rgba(0,0,0,0)",penColor:"black",velocityFilterWeight:.7,onBegin:()=>{},onEnd:()=>{}},H=_=>JSON.parse(JSON.stringify(_)),Y={src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",x:0,y:0};var G=Q({name:"VueSignaturePad",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},customStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})},images:{type:Array,default:()=>[]},scaleToDevicePixelRatio:{type:Boolean,default:()=>!0}},data:()=>({signaturePad:{},cacheImages:[],signatureData:Y,onResizeHandler:null}),computed:{propsImagesAndCustomImages(){const _=H(this.images),t=H(this.cacheImages);return[..._,...t]}},watch:{options:function(_){Object.keys(_).forEach(t=>{this.signaturePad[t]&&(this.signaturePad[t]=_[t])})}},mounted(){const{options:_}=this,t=this.$refs.signaturePadCanvas,s=new U(t,{...Os,..._});this.signaturePad=s,_.resizeHandler&&(this.resizeCanvas=_.resizeHandler.bind(this)),this.onResizeHandler=this.resizeCanvas.bind(this),window.addEventListener("resize",this.onResizeHandler,!1),this.resizeCanvas()},beforeUnmount(){this.onResizeHandler&&window.removeEventListener("resize",this.onResizeHandler,!1)},methods:{resizeCanvas(){const _=this.$refs.signaturePadCanvas,t=this.signaturePad.toData(),s=this.scaleToDevicePixelRatio?Math.max(window.devicePixelRatio||1,1):1;_.width=_.offsetWidth*s,_.height=_.offsetHeight*s,_.getContext("2d").scale(s,s),this.signaturePad.clear(),this.signatureData=Y,this.signaturePad.fromData(t)},saveSignature(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B[0],t=arguments.length>1?arguments[1]:void 0;const{signaturePad:s}=this,i={isEmpty:!1,data:void 0};if(!Rs(_)){const r=B.join(", ");throw new Error(`The Image type is incorrect! We are support ${r} types.`)}return s.isEmpty()?{...i,isEmpty:!0}:(this.signatureData=s.toDataURL(_,t),{...i,data:this.signatureData})},undoSignature(){const{signaturePad:_}=this,t=_.toData();if(t)return _.fromData(t.slice(0,-1))},mergeImageAndSignature(_){return this.signatureData=_,j([...this.images,...this.cacheImages,this.signatureData])},addImages(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.cacheImages=[...this.cacheImages,..._],j([...this.images,...this.cacheImages,this.signatureData])},fromDataURL(_){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return this.signaturePad.fromDataURL(_,t,s)},fromData(_){return this.signaturePad.fromData(_)},toData(){return this.signaturePad.toData()},lockSignaturePad(){return this.signaturePad.off()},openSignaturePad(){return this.signaturePad.on()},isEmpty(){return this.signaturePad.isEmpty()},getPropImagesAndCacheImages(){return this.propsImagesAndCustomImages},clearCacheImages(){return this.cacheImages=[],this.cacheImages},clearSignature(){return this.signaturePad.clear()}},render(){const{width:_,height:t,customStyle:s}=this;return q("div",{style:{width:_,height:t,...s}},[q("canvas",{style:{width:_,height:t},ref:"signaturePadCanvas"})])}});G.__file="src/components/VueSignaturePad.vue";var Fs=Object.freeze({__proto__:null,VueSignaturePad:G});const qs=function(t){Object.entries(Fs).forEach(s=>{let[i,r]=s;t.component(i,r)})};tt($s).use(qs).mount("#app");
