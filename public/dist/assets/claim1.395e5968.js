import{r as F,a as f,o as m,c,b as o,w as g,d as s,F as j,e as H,f as M,n as J,g as B,v as P,h as V,_ as W,i as S,j as z,k as A,l as N,R as U,m as G,p as L,G as Q,q as K,s as Z,t as X,u as $,x as ee,y as ae,z as le,I as oe,A as te,B as se,C as re,H as ne,D as ie,E as de,J as me,K as ue}from"./InputSelect.a90dda86.js";const T={year_1:null,year_2:null,year_3:null,year_4:null},E={title:null,first_name:null,last_name:null},R={day:null,month:null,year:null},t=F({url:"/ReclaimPPI/lead",step:1,showAssesmentModal:!1,showYearsInfoModal:!1,showNIModal:!1,loading:!1,self_assesment_message:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni_message:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years_message:"A rough estimate of amount you've received in pounds (\xA3)",errors:[],year:Object.keys(T),name:Object.keys(E),dob:Object.keys(R),steps:[{title:"PPI Claim Details",number:1},{title:"About You",number:2},{title:"Contact Details",number:3},{title:"Start Claim",number:4}],required:[["self_assesment","year","less_earning","ni_number"],["name","dob"],["email","phone","address","postcode","agree","signature"]],form:[{self_assesment:null,...T,less_earning:null,ni_number:null,cant_remember:null},{...E,...R},{email:null,phone:null,address:null,postcode:null,agree:null},{referal_code:null,signature:null}]}),_e=["Mr","Mrs","Miss","Ms","Dr"],fe=[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}],ce={title:_e,months:fe},be={class:"smodal"},ye={class:"smodal__body"},ge={class:"swizard"},ve={class:"sprogress-bar"},pe={key:0,class:"swizard__step"},Ve=s("div",{class:"swizard__title"},[s("p",{class:"swizard__title__p"}," Please provide us with the TOTAL amount you received for your PPI refunds in the relevant tax years below: ")],-1),we={class:"swizard__years"},xe={class:"swizard__sign__checkbox"},Ie=["disabled"],ke=s("label",{for:"cant_remember"},"Can't remember (Provide it later) ",-1),he={key:0,class:"swizard__submit"},Ce={key:1,class:"swizard__step"},Me={class:"swizard__about"},Be=s("p",{style:{"margin-bottom":"5px","margin-top":"20px","font-weight":"bold"}},"DOB",-1),Pe={class:"swizard__about"},Se={class:"swizard__submit"},ze={key:2,class:"swizard__step"},Ae={class:"swizard__sign__checkbox",style:{"margin-top":"10px !important"}},Ne=s("label",{for:"agreed"},[s("small",null,"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes.")],-1),Ue={class:"swizard__submit"},Te={key:3,class:"swizard__step"},Ee={class:"swizard__input"},Re=s("p",null,"Please draw your signature below in the green box.",-1),Ye={class:"swizard__input__item"},De={class:"swizard__submit"};function Oe(Y,l,w,e,x,I){const v=f("ModalMarkup"),u=f("vue-final-modal"),r=f("HasError"),k=f("IconInfo"),_=f("NextButton"),p=f("BackButton"),h=f("VueSignaturePad");return m(),c("div",be,[o(u,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showAssesmentModal,"onUpdate:modelValue":l[0]||(l[0]=a=>e.state.showAssesmentModal=a)},{default:g(({close:a})=>[o(v,{title:"Warning!!!",text:e.state.self_assesment_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),o(u,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showYearsInfoModal,"onUpdate:modelValue":l[1]||(l[1]=a=>e.state.showYearsInfoModal=a)},{default:g(({close:a})=>[o(v,{title:"Info!",text:e.state.years_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),o(u,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showNIModal,"onUpdate:modelValue":l[2]||(l[2]=a=>e.state.showNIModal=a)},{default:g(({close:a})=>[o(v,{title:"Info!",text:e.state.ni_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),s("div",ye,[s("div",ge,[s("div",ve,[(m(!0),c(j,null,H(e.state.steps,(a,b)=>(m(),M(e.ProgressStep,{class:J({"is-last":e.state.steps.length==b+1,"is-first":b==0}),key:b,title:a.title,number:a.number,step:b+1,current:e.state.step},null,8,["class","title","number","step","current"]))),128))]),e.state.step==1?(m(),c("div",pe,[o(e.StepTitle,{title:"Please enter your PPI Claim details"}),o(e.RadioQuestion,{question:"Were you required to complete a Self-Assessment the year you got your PPI refund?",field:"self_assesment",errors:e.state.errors},{default:g(()=>[o(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":[l[3]||(l[3]=a=>e.state.form[0].self_assesment=a),e.selfAssesedClick],value:!0,label:"Yes"},null,8,["modelValue"]),o(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":l[4]||(l[4]=a=>e.state.form[0].self_assesment=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),Ve,s("div",we,[o(e.AmountBox,{modelValue:e.state.form[0].year_1,"onUpdate:modelValue":l[5]||(l[5]=a=>e.state.form[0].year_1=a),label:"Apr 2018 - Mar 2019","onIcon:click":l[6]||(l[6]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),o(e.AmountBox,{modelValue:e.state.form[0].year_2,"onUpdate:modelValue":l[7]||(l[7]=a=>e.state.form[0].year_2=a),label:"Apr 2019 - Mar 2020","onIcon:click":l[8]||(l[8]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),o(e.AmountBox,{modelValue:e.state.form[0].year_3,"onUpdate:modelValue":l[9]||(l[9]=a=>e.state.form[0].year_3=a),label:"Apr 2020 - Mar 2021","onIcon:click":l[10]||(l[10]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),o(e.AmountBox,{modelValue:e.state.form[0].year_4,"onUpdate:modelValue":l[11]||(l[11]=a=>e.state.form[0].year_4=a),label:"Apr 2021 - Mar 2022","onIcon:click":l[12]||(l[12]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),o(r,{field:"year",errors:e.state.errors,message:"Please fill at least one record"},null,8,["errors"])]),o(e.RadioQuestion,{question:"Were you earning less than \xA350,000 a year at the time you received your PPI refund?",field:"less_earning",errors:e.state.errors},{default:g(()=>[o(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":l[13]||(l[13]=a=>e.state.form[0].less_earning=a),value:!0,label:"Yes"},null,8,["modelValue"]),o(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":l[14]||(l[14]=a=>e.state.form[0].less_earning=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),o(e.InputText,{label:"National insurance (NI) Number",modelValue:e.state.form[0].ni_number,"onUpdate:modelValue":l[16]||(l[16]=a=>e.state.form[0].ni_number=a)},{default:g(()=>[s("span",{class:"swizard__input__item__right-icon ni-number",onClick:l[15]||(l[15]=a=>e.state.showNIModal=!0)},[o(k)])]),_:1},8,["modelValue"]),o(r,{field:"invalid_ni",errors:e.state.errors,message:"Invalid NI Number"},null,8,["errors"]),o(r,{field:"ni_number",errors:e.state.errors},null,8,["errors"]),s("div",xe,[B(s("input",{id:"cant_remember",disabled:e.niCheckDisabled,type:"checkbox",value:!0,"onUpdate:modelValue":l[17]||(l[17]=a=>e.state.form[0].cant_remember=a)},null,8,Ie),[[P,e.state.form[0].cant_remember]]),ke]),e.state.form[0].self_assesment?(m(),M(r,{key:1,style:{"text-align":"center"},field:"already_assessed",errors:["already_assessed"],message:e.state.self_assesment_message},null,8,["message"])):(m(),c("div",he,[o(_,{text:"Continue",onClick:e.stepForward})]))])):V("",!0),e.state.step==2?(m(),c("div",Ce,[o(e.StepTitle,{title:"Please complete your details below to start your claim"}),s("div",Me,[o(e.InputSelect,{class:"swizard__about__item",label:"Title",options:e.options.title,modelValue:e.state.form[1].title,"onUpdate:modelValue":l[18]||(l[18]=a=>e.state.form[1].title=a)},null,8,["options","modelValue"]),o(e.InputText,{class:"swizard__about__item",label:"First Name",modelValue:e.state.form[1].first_name,"onUpdate:modelValue":l[19]||(l[19]=a=>e.state.form[1].first_name=a)},null,8,["modelValue"]),o(e.InputText,{class:"swizard__about__item",label:"Last Name",modelValue:e.state.form[1].last_name,"onUpdate:modelValue":l[20]||(l[20]=a=>e.state.form[1].last_name=a)},null,8,["modelValue"])]),o(r,{field:"name",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),Be,s("div",Pe,[o(e.InputSelect,{class:"swizard__about__item",label:"Day","in-select":"",options:e.range(1,1,31),modelValue:e.state.form[1].day,"onUpdate:modelValue":l[21]||(l[21]=a=>e.state.form[1].day=a)},null,8,["options","modelValue"]),o(e.InputSelect,{class:"swizard__about__item",label:"Month","in-select":"",options:e.options.months,modelValue:e.state.form[1].month,"onUpdate:modelValue":l[22]||(l[22]=a=>e.state.form[1].month=a)},null,8,["options","modelValue"]),o(e.InputSelect,{class:"swizard__about__item",label:"Year","in-select":"",options:e.range(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e.state.form[1].year,"onUpdate:modelValue":l[23]||(l[23]=a=>e.state.form[1].year=a)},null,8,["options","modelValue"])]),o(r,{field:"dob",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),s("div",Se,[o(_,{text:"Continue",onClick:e.stepForward}),o(p,{text:"Back",onClick:e.stepBack})])])):V("",!0),e.state.step==3?(m(),c("div",ze,[o(e.StepTitle,{title:"Enter your contact details to claim your tax back"}),o(e.InputText,{type:"email",label:"Email",modelValue:e.state.form[2].email,"onUpdate:modelValue":l[24]||(l[24]=a=>e.state.form[2].email=a)},null,8,["modelValue"]),o(r,{field:"email",errors:e.state.errors},null,8,["errors"]),o(r,{field:"invalid_email",errors:e.state.errors,message:"Invalid Email"},null,8,["errors"]),o(e.InputText,{type:"tel",label:"Phone Number",modelValue:e.state.form[2].phone,"onUpdate:modelValue":l[25]||(l[25]=a=>e.state.form[2].phone=a)},null,8,["modelValue"]),o(r,{field:"phone",errors:e.state.errors},null,8,["errors"]),o(r,{field:"invalid_phone",errors:e.state.errors,message:"Invalid Phone Number"},null,8,["errors"]),o(e.InputText,{label:"Address",modelValue:e.state.form[2].address,"onUpdate:modelValue":l[26]||(l[26]=a=>e.state.form[2].address=a)},null,8,["modelValue"]),o(r,{field:"address",errors:e.state.errors},null,8,["errors"]),o(e.InputText,{label:"Postcode",modelValue:e.state.form[2].postcode,"onUpdate:modelValue":l[27]||(l[27]=a=>e.state.form[2].postcode=a)},null,8,["modelValue"]),o(r,{field:"postcode",errors:e.state.errors},null,8,["errors"]),s("div",Ae,[B(s("input",{id:"agreed",type:"checkbox",value:1,"onUpdate:modelValue":l[28]||(l[28]=a=>e.state.form[2].agree=a)},null,512),[[P,e.state.form[2].agree]]),Ne]),o(r,{field:"agree",errors:e.state.errors},null,8,["errors"]),s("div",Ue,[o(_,{text:"Continue",onClick:e.stepForward}),o(p,{text:"Back",onClick:e.stepBack})])])):V("",!0),e.state.step==4?(m(),c("div",Te,[o(e.GreatNews),o(e.InputText,{label:"Do you have a referral code? (optional)",modelValue:e.state.form[3].referal_code,"onUpdate:modelValue":l[29]||(l[29]=a=>e.state.form[3].referal_code=a)},null,8,["modelValue"]),s("div",Ee,[Re,s("div",Ye,[o(h,{width:"100%",height:"200px",style:{border:"1px solid green","background-color":"white"},ref:"signaturePad"},null,512),o(r,{field:"signature",errors:e.state.errors,message:"Signature required"},null,8,["errors"])])]),s("small",{class:"clear-signature",onClick:e.clearSignature},"Clear Signature"),s("div",De,[o(_,{disabled:e.state.loading,"no-icon":"",text:e.state.loading?"Please Wait ---":"Start Your Claim",onClick:e.submit},null,8,["disabled","text"]),o(p,{text:"Back",onClick:e.stepBack})])])):V("",!0)])])])}const qe={__name:"App",setup(Y,{expose:l}){l();const{filterEmptyKeys:w,hasSome:e,hasEvery:x,arrayIntersection:I,range:v}=U(),u=S(null);z(()=>{});const r=A(()=>{var d;return t.form[0].cant_remember=!1,(d=t.form[0].ni_number)==null?void 0:d.length});function k(){setTimeout(()=>{console.log(t.form[0]),t.showAssesmentModal=!0},0)}function _(){const d=Object.values(t.required[t.step-1]),n=t.form[t.step-1];d.includes("ni_number")&&n.cant_remember&&d.splice(d.indexOf("ni_number"),1);const y=w(n);let i=I(y,d);if(t.step==1){x(Object.values(t.year),y)&&i.push("year"),n.self_assesment&&i.push("already_assessed");var O=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");![null,""].includes(n.ni_number)&&!O.test(n.ni_number)&&i.push("invalid_ni")}if(t.step==2&&(e(Object.values(t.name),y)&&i.push("name"),e(Object.values(t.dob),y)&&i.push("dob")),t.step==3){var q=/\S+@\S+\.\S+/;n.email!=null&&!q.test(n.email)&&i.push("invalid_email"),n.phone!=null&&(n.phone.length!=11||n.phone.charAt(0)!="0")&&i.push("invalid_phone"),!n.agree&&!i.includes("agree")&&i.push("agree")}return t.errors=[...i],!t.errors.length}function p(){_()&&t.step>=1&&t.step<=4&&(t.step++,a())}function h(){t.step>1&&t.step<=4&&(t.step--,a())}function a(){document.getElementById("app").scrollIntoView()}function b(){u.value.clearSignature()}async function D(){const{isEmpty:d,data:n}=u.value.saveSignature();if(d){t.errors.push("signature");return}t.loading=!0,t.form[3].signature=n;const y={...t.form[0],...t.form[1],...t.form[2],...t.form[3]};await N.post(t.url,y),t.loading=!1,window.location.href="/thank-you"}const C={filterEmptyKeys:w,hasSome:e,hasEvery:x,arrayIntersection:I,range:v,signaturePad:u,niCheckDisabled:r,selfAssesedClick:k,validate:_,stepForward:p,stepBack:h,scrollUp:a,clearSignature:b,submit:D,computed:A,onMounted:z,ref:S,axios:N,state:t,Reusable:U,ProgressStep:G,StepTitle:L,GreatNews:Q,RadioBox:K,RadioQuestion:Z,AmountBox:X,InputText:$,InputSelect:ee,options:ce};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}},Fe=W(qe,[["render",Oe]]);ae(Fe).use(le).component("IconInfo",oe).component("IconNext",te).component("IconPrevious",se).component("IconSelect",re).component("HasError",ne).component("NextButton",ie).component("BackButton",de).component("VueFinalModal",me).component("ModalMarkup",ue).mount("#app");
