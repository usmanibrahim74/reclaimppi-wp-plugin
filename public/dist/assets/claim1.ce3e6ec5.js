import{r as O,a as f,o as d,c,b as t,w as g,d as s,F,e as j,f as M,n as H,g as P,v as B,h as p,_ as W,i as S,j as z,k as A,l as N,R as U,m as G,p as J,G as L,q as Q,s as K,t as Z,u as X,x as $,y as ee,z as ae,I as oe,A as te,B as le,C as se,H as re,D as ne,E as ie,J as de,K as me}from"./InputSelect.4d7629e7.js";const T={year_1:null,year_2:null,year_3:null,year_4:null},E={title:null,first_name:null,last_name:null},R={day:null,month:null,year:null},l=O({url:"/index.php/ReclaimPPI/lead",step:1,showAssesmentModal:!1,showYearsInfoModal:!1,showNIModal:!1,loading:!1,self_assesment_message:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni_message:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years_message:"A rough estimate of amount you've received in pounds (\xA3)",errors:[],year:Object.keys(T),name:Object.keys(E),dob:Object.keys(R),steps:[{title:"PPI Claim Details",number:1},{title:"About You",number:2},{title:"Contact Details",number:3},{title:"Start Claim",number:4}],required:[["self_assesment","year","less_earning","ni_number"],["name","dob"],["email","phone","address","postcode","agree","signature"]],form:[{self_assesment:null,...T,less_earning:null,ni_number:null,cant_remember:null},{...E,...R},{email:null,phone:null,address:null,postcode:null,agree:null},{referal_code:null,signature:null}]}),ue=["Mr.","Mrs.","Miss","Ms","Dr"],_e={title:ue},fe={class:"smodal"},ce={class:"smodal__body"},be={class:"swizard"},ye={class:"sprogress-bar"},ge={key:0,class:"swizard__step"},Ve=s("div",{class:"swizard__title"},[s("p",{class:"swizard__title__p"}," Please provide us with the TOTAL amount you received for your PPI refunds in the relevant tax years below ")],-1),ve={class:"swizard__years"},pe={class:"swizard__sign__checkbox"},we=["disabled"],xe=s("label",{for:"cant_remember"},"Can't remember (Provide it later) ",-1),Ie={key:0,class:"swizard__submit"},ke={key:1,class:"swizard__step"},he={class:"swizard__about"},Ce=s("p",{style:{"margin-bottom":"5px"}},"DOB",-1),Me={class:"swizard__about"},Pe={class:"swizard__submit"},Be={key:2,class:"swizard__step"},Se={class:"swizard__sign__checkbox"},ze=s("label",{for:"agreed"},[s("small",null,"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes.")],-1),Ae={class:"swizard__submit"},Ne={key:3,class:"swizard__step"},Ue={class:"swizard__input"},Te=s("p",null,"Please draw your signature below in the green box.",-1),Ee={class:"swizard__input__item"},Re={class:"swizard__submit"};function Ye(Y,o,w,e,x,I){const V=f("ModalMarkup"),u=f("vue-final-modal"),r=f("HasError"),k=f("IconInfo"),_=f("NextButton"),v=f("BackButton"),h=f("VueSignaturePad");return d(),c("div",fe,[t(u,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showAssesmentModal,"onUpdate:modelValue":o[0]||(o[0]=a=>e.state.showAssesmentModal=a)},{default:g(({close:a})=>[t(V,{title:"Warning!!!",text:e.state.self_assesment_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),t(u,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showYearsInfoModal,"onUpdate:modelValue":o[1]||(o[1]=a=>e.state.showYearsInfoModal=a)},{default:g(({close:a})=>[t(V,{title:"Info!",text:e.state.years_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),t(u,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showNIModal,"onUpdate:modelValue":o[2]||(o[2]=a=>e.state.showNIModal=a)},{default:g(({close:a})=>[t(V,{title:"Info!",text:e.state.ni_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),s("div",ce,[s("div",be,[s("div",ye,[(d(!0),c(F,null,j(e.state.steps,(a,b)=>(d(),M(e.ProgressStep,{class:H({"is-last":e.state.steps.length==b+1,"is-first":b==0}),key:b,title:a.title,number:a.number,step:b+1,current:e.state.step},null,8,["class","title","number","step","current"]))),128))]),e.state.step==1?(d(),c("div",ge,[t(e.StepTitle,{title:"Please enter your PPI Claim details"}),t(e.RadioQuestion,{question:"Were you required to complete a Self-Assessment the year you got your PPI refund?",field:"self_assesment",errors:e.state.errors},{default:g(()=>[t(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":[o[3]||(o[3]=a=>e.state.form[0].self_assesment=a),e.selfAssesedClick],value:!0,label:"Yes"},null,8,["modelValue"]),t(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":o[4]||(o[4]=a=>e.state.form[0].self_assesment=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),Ve,s("div",ve,[t(e.AmountBox,{modelValue:e.state.form[0].year_1,"onUpdate:modelValue":o[5]||(o[5]=a=>e.state.form[0].year_1=a),label:"Apr 2018 - Mar 2019","onIcon:click":o[6]||(o[6]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),t(e.AmountBox,{modelValue:e.state.form[0].year_2,"onUpdate:modelValue":o[7]||(o[7]=a=>e.state.form[0].year_2=a),label:"Apr 2019 - Mar 2020","onIcon:click":o[8]||(o[8]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),t(e.AmountBox,{modelValue:e.state.form[0].year_3,"onUpdate:modelValue":o[9]||(o[9]=a=>e.state.form[0].year_3=a),label:"Apr 2020 - Mar 2021","onIcon:click":o[10]||(o[10]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),t(e.AmountBox,{modelValue:e.state.form[0].year_4,"onUpdate:modelValue":o[11]||(o[11]=a=>e.state.form[0].year_4=a),label:"Apr 2021 - Mar 2022","onIcon:click":o[12]||(o[12]=a=>e.state.showYearsInfoModal=!0)},null,8,["modelValue"]),t(r,{field:"year",errors:e.state.errors,message:"Please fill at least one record"},null,8,["errors"])]),t(e.RadioQuestion,{question:"Were you earning less than \xA350,000.00 a year at the time you received your PPI refund?",field:"less_earning",errors:e.state.errors},{default:g(()=>[t(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":o[13]||(o[13]=a=>e.state.form[0].less_earning=a),value:!0,label:"Yes"},null,8,["modelValue"]),t(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":o[14]||(o[14]=a=>e.state.form[0].less_earning=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),t(e.InputText,{label:"National insurance (NI) Number",modelValue:e.state.form[0].ni_number,"onUpdate:modelValue":o[16]||(o[16]=a=>e.state.form[0].ni_number=a)},{default:g(()=>[s("span",{class:"swizard__input__item__right-icon ni-number",onClick:o[15]||(o[15]=a=>e.state.showNIModal=!0)},[t(k)])]),_:1},8,["modelValue"]),t(r,{field:"invalid_ni",errors:e.state.errors,message:"Invalid NI Number"},null,8,["errors"]),t(r,{field:"ni_number",errors:e.state.errors},null,8,["errors"]),s("div",pe,[P(s("input",{id:"cant_remember",disabled:e.niCheckDisabled,type:"checkbox",value:!0,"onUpdate:modelValue":o[17]||(o[17]=a=>e.state.form[0].cant_remember=a)},null,8,we),[[B,e.state.form[0].cant_remember]]),xe]),e.state.form[0].self_assesment?(d(),M(r,{key:1,style:{"text-align":"center"},field:"already_assessed",errors:["already_assessed"],message:e.state.self_assesment_message},null,8,["message"])):(d(),c("div",Ie,[t(_,{text:"Continue",onClick:e.stepForward})]))])):p("",!0),e.state.step==2?(d(),c("div",ke,[t(e.StepTitle,{title:"Please complete your details below to start your claim"}),s("div",he,[t(e.InputSelect,{class:"swizard__about__item",label:"Title",options:e.options.title,modelValue:e.state.form[1].title,"onUpdate:modelValue":o[18]||(o[18]=a=>e.state.form[1].title=a)},null,8,["options","modelValue"]),t(e.InputText,{class:"swizard__about__item",label:"First Name",modelValue:e.state.form[1].first_name,"onUpdate:modelValue":o[19]||(o[19]=a=>e.state.form[1].first_name=a)},null,8,["modelValue"]),t(e.InputText,{class:"swizard__about__item",label:"Last Name",modelValue:e.state.form[1].last_name,"onUpdate:modelValue":o[20]||(o[20]=a=>e.state.form[1].last_name=a)},null,8,["modelValue"])]),t(r,{field:"name",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),Ce,s("div",Me,[t(e.InputSelect,{class:"swizard__about__item",label:"Day","in-select":"",options:e.range(1,1,31),modelValue:e.state.form[1].day,"onUpdate:modelValue":o[21]||(o[21]=a=>e.state.form[1].day=a)},null,8,["options","modelValue"]),t(e.InputSelect,{class:"swizard__about__item",label:"Month","in-select":"",options:e.range(1,1,12),modelValue:e.state.form[1].month,"onUpdate:modelValue":o[22]||(o[22]=a=>e.state.form[1].month=a)},null,8,["options","modelValue"]),t(e.InputSelect,{class:"swizard__about__item",label:"Year","in-select":"",options:e.range(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e.state.form[1].year,"onUpdate:modelValue":o[23]||(o[23]=a=>e.state.form[1].year=a)},null,8,["options","modelValue"])]),t(r,{field:"dob",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),s("div",Pe,[t(_,{text:"Continue",onClick:e.stepForward}),t(v,{text:"Back",onClick:e.stepBack})])])):p("",!0),e.state.step==3?(d(),c("div",Be,[t(e.StepTitle,{title:"Enter your contact details to claim your tax back"}),t(e.InputText,{type:"email",label:"Email",modelValue:e.state.form[2].email,"onUpdate:modelValue":o[24]||(o[24]=a=>e.state.form[2].email=a)},null,8,["modelValue"]),t(r,{field:"email",errors:e.state.errors},null,8,["errors"]),t(r,{field:"invalid_email",errors:e.state.errors,message:"Invalid Email"},null,8,["errors"]),t(e.InputText,{type:"tel",label:"Phone Number",modelValue:e.state.form[2].phone,"onUpdate:modelValue":o[25]||(o[25]=a=>e.state.form[2].phone=a)},null,8,["modelValue"]),t(r,{field:"phone",errors:e.state.errors},null,8,["errors"]),t(r,{field:"invalid_phone",errors:e.state.errors,message:"Invalid Phone Number"},null,8,["errors"]),t(e.InputText,{label:"Address",modelValue:e.state.form[2].address,"onUpdate:modelValue":o[26]||(o[26]=a=>e.state.form[2].address=a)},null,8,["modelValue"]),t(r,{field:"address",errors:e.state.errors},null,8,["errors"]),t(e.InputText,{label:"Postcode",modelValue:e.state.form[2].postcode,"onUpdate:modelValue":o[27]||(o[27]=a=>e.state.form[2].postcode=a)},null,8,["modelValue"]),t(r,{field:"postcode",errors:e.state.errors},null,8,["errors"]),s("div",Se,[P(s("input",{id:"agreed",type:"checkbox",value:1,"onUpdate:modelValue":o[28]||(o[28]=a=>e.state.form[2].agree=a)},null,512),[[B,e.state.form[2].agree]]),ze]),t(r,{field:"agree",errors:e.state.errors},null,8,["errors"]),s("div",Ae,[t(_,{text:"Continue",onClick:e.stepForward}),t(v,{text:"Back",onClick:e.stepBack})])])):p("",!0),e.state.step==4?(d(),c("div",Ne,[t(e.GreatNews),t(e.InputText,{label:"Do you have a referral code? (optional)",modelValue:e.state.form[3].referal_code,"onUpdate:modelValue":o[29]||(o[29]=a=>e.state.form[3].referal_code=a)},null,8,["modelValue"]),s("div",Ue,[Te,s("div",Ee,[t(h,{width:"100%",height:"200px",style:{border:"1px solid green","background-color":"white"},ref:"signaturePad"},null,512),t(r,{field:"signature",errors:e.state.errors,message:"Signature required"},null,8,["errors"])])]),s("small",{class:"clear-signature",onClick:e.clearSignature},"Clear Signature"),s("div",Re,[t(_,{disabled:e.state.loading,"no-icon":"",text:e.state.loading?"Please Wait ---":"Start Your Claim",onClick:e.submit},null,8,["disabled","text"]),t(v,{text:"Back",onClick:e.stepBack})])])):p("",!0)])])])}const De={__name:"App",setup(Y,{expose:o}){o();const{filterEmptyKeys:w,hasSome:e,hasEvery:x,arrayIntersection:I,range:V}=U(),u=S(null);z(()=>{});const r=A(()=>{var i;return l.form[0].cant_remember=!1,(i=l.form[0].ni_number)==null?void 0:i.length});function k(){setTimeout(()=>{console.log(l.form[0]),l.showAssesmentModal=!0},0)}function _(){const i=Object.values(l.required[l.step-1]),n=l.form[l.step-1];i.includes("ni_number")&&n.cant_remember&&i.splice(i.indexOf("ni_number"),1);const y=w(n);let m=I(y,i);if(l.step==1){x(Object.values(l.year),y)&&m.push("year"),n.self_assesment&&m.push("already_assessed");var D=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");![null,""].includes(n.ni_number)&&!D.test(n.ni_number)&&m.push("invalid_ni")}if(l.step==2&&(e(Object.values(l.name),y)&&m.push("name"),e(Object.values(l.dob),y)&&m.push("dob")),l.step==3){var q=/\S+@\S+\.\S+/;n.email!=null&&!q.test(n.email)&&m.push("invalid_email"),n.phone!=null&&(n.phone.length!=11||n.phone.charAt(0)!="0")&&m.push("invalid_phone")}return l.errors=[...m],!l.errors.length}function v(){_()&&l.step>=1&&l.step<=4&&l.step++}function h(){console.log("back"),l.step>1&&l.step<=4&&l.step--}function a(){u.value.clearSignature()}async function b(){const{isEmpty:i,data:n}=u.value.saveSignature();if(i){l.errors.push("signature");return}l.loading=!0,l.form[3].signature=n;const y={...l.form[0],...l.form[1],...l.form[2],...l.form[3]};await N.post(l.url,y),l.loading=!1,window.location.href="/thank-you"}const C={filterEmptyKeys:w,hasSome:e,hasEvery:x,arrayIntersection:I,range:V,signaturePad:u,niCheckDisabled:r,selfAssesedClick:k,validate:_,stepForward:v,stepBack:h,clearSignature:a,submit:b,computed:A,onMounted:z,ref:S,axios:N,state:l,Reusable:U,ProgressStep:G,StepTitle:J,GreatNews:L,RadioBox:Q,RadioQuestion:K,AmountBox:Z,InputText:X,InputSelect:$,options:_e};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}},qe=W(De,[["render",Ye]]);ee(qe).use(ae).component("IconInfo",oe).component("IconNext",te).component("IconPrevious",le).component("IconSelect",se).component("HasError",re).component("NextButton",ne).component("BackButton",ie).component("VueFinalModal",de).component("ModalMarkup",me).mount("#app");
