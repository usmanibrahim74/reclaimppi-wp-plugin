import{r as P,C as F,k as q,a as i,o as y,c as k,b as t,d as s,F as I,A as e,e as O,f as E,w as A,t as K,h as N,R as M,i as D,j as H,_ as L,l as $,m as W,p as G,I as Z,q as Q,s as X,u as ee,E as te}from"./reuseable.6619a4c7.js";import{_ as oe,G as le,a as se,H as re,b as ne,c as ae,d as ie,e as ue,f as de,g as me,h as ce,i as pe,j as _e}from"./ProgressStep.7f3fd83b.js";import{m as fe}from"./mitt.550594b0.js";const be=["Mr","Mrs","Miss","Ms","Dr"],xe=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],T={year_1:null,year_2:null,year_3:null,year_4:null},z={title:null,first_name:null,last_name:null},R={day:null,month:null,year:null},U={self_assessment:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years:"A rough estimate of amount you've received in pounds (\xA3)"},g=P({url:"/ReclaimPPI/lead",step:1,loading:!1,steps:[{title:"Criteria",number:1},{title:"PPI Claim Details",number:2},{title:"About You",number:3},{title:"Contact Details",number:4},{title:"Start Claim",number:5}],form:[{self_assessment:null},{...T,less_earning:null,ni_number:null,cant_remember:null},{...z,...R},{email:null,phone:null,address:null,postcode:null,agree:null},{referral_code:null,signature:null}]}),ye={class:"mt-6 mb-4"},ge={__name:"criteria",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(v,{emit:u}){const _=v,o=F("emitter");P({required:["self_assessment"],errors:[]});const b=q({get(){return _.modelValue},set(n){u("update:modelValue",n)}});function d(){b.self_assessment=!1,a()}function r(){b.self_assessment=!0,o.emit("toggleModal",{name:"assessmentModal",show:!0})}function a(){u("forward")}return(n,m)=>{const c=i("step-title"),p=i("question");return y(),k(I,null,[t(c,{title:"Is the below statement true?"}),s("div",ye,[t(p,{labelFor:"",class:"text-center max-w-[450px] mx-auto",text:"Please press proceed if you were NOT self-employed the year you got your PPI refund."}),s("div",{class:"flex flex-col md:flex-row gap-5 justify-center mt-6 items-center"},[s("button",{onClick:d,type:"button",class:"border-red-600 border-solid border-2 font-medium text-red-600 flex items-center justify-center rounded py-2 px-4 max-w-[200px] w-full"}," Proceed "),s("button",{type:"button",class:"border-red-600 border-solid border-2 font-medium text-red-600 flex items-center justify-center rounded py-2 px-4 max-w-[200px] w-full",onClick:r}," I was self-employed ")])])],64)}}},ve={class:"mt-6 mb-4"},Ve={class:"grid sm:grid-cols-2 sm:justify-items-center gap-x-6"},we={class:"flex justify-start w-full mt-4"},he={class:"mt-6 mb-4"},ke={class:"flex my-2"},Be={class:"mt-6 mb-2"},Ie={class:"absolute right-2 top-1/2 -translate-y-1/2 cursor-pointer group duration-300"},Ce={class:"absolute hidden group-hover:flex -left-[145px] sm:-left-[285px] -top-4 -translate-y-full sm:w-80 w-44 px-2 py-1 bg-gray-700 rounded-lg text-white text-sm after:content-[''] after:absolute after:right-[2%] after:top-[100%] after:-translate-x-1/2 after:border-8 after:border-x-transparent after:border-b-transparent after:border-t-gray-700"},Pe={class:"mt-2"},Ne={class:"flex items-center mt-2 mb-6"},qe={class:"flex items-center justify-center"},Me={__name:"claim",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(v,{emit:u}){const _=v,{filterEmptyKeys:o,hasEvery:b,arrayIntersection:d,range:r}=M();let a=P({showAssessmentModal:!1,required:["years","less_earning","ni_number"],errors:[]});const n=q({get(){return _.modelValue},set(p){u("update:modelValue",p)}});function m(){const p=_.modelValue;let l=Object.values(a.required);l.includes("ni_number")&&p.cant_remember&&l.splice(l.indexOf("ni_number"),1);const f=o(p);let x=d(f,l);b(Object.keys(T),f)&&x.push("years");var V=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");return![null,""].includes(p.ni_number)&&!V.test(p.ni_number)&&x.push("invalid_ni"),a.errors=[...x],!a.errors.length}function c(){m()&&u("forward")}return(p,l)=>{const f=i("step-title"),x=i("question"),V=i("HasError"),C=i("radio-box"),w=i("IconInfo"),j=i("input-text"),S=i("sign-checkbox"),h=i("NextButton");return y(),k(I,null,[t(f,{title:"Please enter your PPI Claim details"}),e(n)?(y(),k(I,{key:0},[s("div",ve,[t(x,{text:`Please provide us with the TOTAL amount you
                received for your PPI refunds in the relevant tax
                years below:`}),s("div",Ve,[(y(!0),k(I,null,O(e(r)(1,1,4),B=>(y(),E(oe,{modelValue:e(n)["year_"+B],"onUpdate:modelValue":J=>e(n)["year_"+B]=J,label:`Apr ${2018+B-1} - Mar ${2018+B}`,tooltip:e(U).years},null,8,["modelValue","onUpdate:modelValue","label","tooltip"]))),256)),s("div",we,[t(V,{field:"years",errors:e(a).errors,message:"Please fill at least one record"},null,8,["errors"])])])]),s("div",he,[t(x,{text:`Were you earning less than \xA350,000 a year at the
                time you received your PPI refund?`}),s("div",ke,[t(C,{name:"less_earning",modelValue:e(n).less_earning,"onUpdate:modelValue":l[0]||(l[0]=B=>e(n).less_earning=B),value:!0,label:"Yes"},null,8,["modelValue"]),t(C,{name:"less_earning",modelValue:e(n).less_earning,"onUpdate:modelValue":l[1]||(l[1]=B=>e(n).less_earning=B),value:!1,label:"No"},null,8,["modelValue"])]),t(V,{field:"less_earning",errors:e(a).errors},null,8,["errors"])]),s("div",Be,[t(j,{label:"National Insurance (NI) Number",modelValue:e(n).ni_number,"onUpdate:modelValue":l[2]||(l[2]=B=>e(n).ni_number=B)},{default:A(()=>[s("span",Ie,[t(w),s("span",Ce,K(e(U).ni),1)])]),_:1},8,["modelValue"]),s("div",Pe,[t(V,{field:"invalid_ni",errors:e(a).errors,message:"Invalid NI Number"},null,8,["errors"]),t(V,{field:"ni_number",errors:e(a).errors},null,8,["errors"])])]),s("div",Ne,[t(S,{modelValue:e(n).cant_remember,"onUpdate:modelValue":l[3]||(l[3]=B=>e(n).cant_remember=B),value:!0,label:"Can't remember (Provide it later)",disabled:p.niCheckDisabled},null,8,["modelValue","disabled"])]),s("div",qe,[t(h,{text:"Continue",onClick:c})])],64)):N("",!0)],64)}}},je={class:"flex flex-col sm:flex-row mt-6"},Se={class:"basis-1/3 pr-2"},Ue={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},Ee={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},$e={class:"flex flex-col sm:flex-row"},Fe={class:"flex items-center justify-center flex-col"},Oe={__name:"about",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(v,{emit:u}){const _=v,{range:o,hasSome:b,filterEmptyKeys:d,arrayIntersection:r}=M();let a=P({required:["name","dob"],errors:[]});const n=q({get(){return console.log(_),_.modelValue},set(p){u("update:modelValue",p)}});function m(){const p=_.modelValue;let l=Object.values(a.required);const f=d(p);let x=r(f,l);return b(Object.keys(z),f)&&x.push("name"),b(Object.keys(R),f)&&x.push("dob"),a.errors=[...x],!a.errors.length}function c(){m()&&u("forward")}return(p,l)=>{const f=i("step-title"),x=i("input-select"),V=i("input-text"),C=i("HasError"),w=i("question"),j=i("NextButton"),S=i("BackButton");return y(),k(I,null,[t(f,{title:"Please complete your details below to start your claim"}),s("div",je,[s("div",Se,[t(x,{class:"",label:"Title",options:e(be),modelValue:e(n).title,"onUpdate:modelValue":l[0]||(l[0]=h=>e(n).title=h)},null,8,["options","modelValue"])]),s("div",Ue,[t(V,{class:"",label:"First Name",modelValue:e(n).first_name,"onUpdate:modelValue":l[1]||(l[1]=h=>e(n).first_name=h)},null,8,["modelValue"])]),s("div",Ee,[t(V,{class:"",label:"Last Name",modelValue:e(n).last_name,"onUpdate:modelValue":l[2]||(l[2]=h=>e(n).last_name=h)},null,8,["modelValue"])])]),t(C,{class:"mt-1",field:"name",errors:e(a).errors,message:"The above fields are required"},null,8,["errors"]),t(w,{class:"mt-6",text:"DOB"}),s("div",$e,[t(x,{class:"basis-1/3 pr-2",label:"Day","in-select":"",options:e(o)(1,1,31),modelValue:e(n).day,"onUpdate:modelValue":l[3]||(l[3]=h=>e(n).day=h)},null,8,["options","modelValue"]),t(x,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Month","in-select":"",options:e(xe),modelValue:e(n).month,"onUpdate:modelValue":l[4]||(l[4]=h=>e(n).month=h)},null,8,["options","modelValue"]),t(x,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Year","in-select":"",options:e(o)(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e(n).year,"onUpdate:modelValue":l[5]||(l[5]=h=>e(n).year=h)},null,8,["options","modelValue"])]),t(C,{class:"mt-1",field:"dob",errors:e(a).errors,message:"The above fields are required"},null,8,["errors"]),s("div",Fe,[t(j,{class:"mt-8 mb-2",text:"Continue",onClick:c}),t(S,{class:"font-bold",text:"Back",onClick:l[6]||(l[6]=h=>p.$emit("backward"))})])],64)}}},Ae={class:"mt-6"},De={class:"mt-6"},He={class:"mt-6"},Te={class:"mt-6"},ze={class:"flex items-center mt-4 text-sm"},Re={class:"flex items-center justify-center flex-col mt-7"},Ye={__name:"contact",props:{modelValue:{type:Object,required:!0},messages:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(v,{emit:u}){const _=v,{filterEmptyKeys:o,arrayIntersection:b}=M();let d=P({required:["phone","address","postcode","agree","signature"],errors:[]});const r=q({get(){return console.log(_),_.modelValue},set(m){u("update:modelValue",m)}});function a(){const m=_.modelValue;let c=Object.values(d.required);const p=o(m);let l=b(p,c);var f=/\S+@\S+\.\S+/;return m.email!=null&&!f.test(m.email)&&l.push("invalid_email"),m.phone!=null&&(m.phone.length!=11||m.phone.charAt(0)!="0")&&l.push("invalid_phone"),!m.agree&&!l.includes("agree")&&l.push("agree"),d.errors=[...l],!d.errors.length}function n(){a()&&u("forward")}return(m,c)=>{const p=i("step-title"),l=i("input-text"),f=i("HasError"),x=i("sign-checkbox"),V=i("NextButton"),C=i("BackButton");return y(),k(I,null,[t(p,{title:"Enter your contact details to claim your tax back"}),s("div",null,[s("div",Ae,[t(l,{type:"email",label:"Email",modelValue:e(r).email,"onUpdate:modelValue":c[0]||(c[0]=w=>e(r).email=w)},null,8,["modelValue"]),t(f,{class:"mt-1",field:"email",errors:e(d).errors},null,8,["errors"]),t(f,{class:"mt-1",field:"invalid_email",errors:e(d).errors,message:"Invalid Email"},null,8,["errors"])]),s("div",De,[t(l,{type:"tel",label:"Phone Number",modelValue:e(r).phone,"onUpdate:modelValue":c[1]||(c[1]=w=>e(r).phone=w)},null,8,["modelValue"]),t(f,{class:"mt-1",field:"phone",errors:e(d).errors},null,8,["errors"]),t(f,{class:"mt-1",field:"invalid_phone",errors:e(d).errors,message:"Invalid Phone Number"},null,8,["errors"])]),s("div",He,[t(l,{label:"Address",modelValue:e(r).address,"onUpdate:modelValue":c[2]||(c[2]=w=>e(r).address=w)},null,8,["modelValue"]),t(f,{class:"mt-1",field:"address",errors:e(d).errors},null,8,["errors"])]),s("div",Te,[t(l,{label:"Postcode",modelValue:e(r).postcode,"onUpdate:modelValue":c[3]||(c[3]=w=>e(r).postcode=w)},null,8,["modelValue"]),t(f,{class:"mt-1",field:"postcode",errors:e(d).errors},null,8,["errors"])])]),s("div",ze,[t(x,{modelValue:e(r).agree,"onUpdate:modelValue":c[4]||(c[4]=w=>e(r).agree=w),value:!0,label:"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes."},null,8,["modelValue"])]),t(f,{class:"mt-2",field:"agree",errors:e(d).errors},null,8,["errors"]),s("div",Re,[t(V,{text:"Continue",onClick:n}),t(C,{text:"Back",onClick:c[5]||(c[5]=w=>m.$emit("backward"))})])],64)}}},Je={class:"mt-6 mb-1"},Ke=s("p",{class:"mb-1"}," Please draw your signature below in the green box. ",-1),Le={class:""},We={class:"flex items-center justify-center flex-col mt-8"},Ge={__name:"start-claim",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["update:modelValue","forward"],setup(v,{emit:u}){const _=v,o=D(null);let b=P({errors:[]});function d(){o.value.clearSignature()}function r(){const{isEmpty:n,data:m}=o.value.saveSignature();if(n){b.errors.push("signature");return}a.value.signature=m,u("forward")}const a=q({get(){return _.modelValue},set(n){return new Proxy(_.modelValue,{set(m,c,p){return u("update:modelValue",{...m,[c]:p}),!0}})}});return(n,m)=>{const c=i("input-text"),p=i("VueSignaturePad"),l=i("HasError"),f=i("NextButton"),x=i("BackButton");return y(),k(I,null,[t(le),t(c,{label:"Do you have a referral code? (optional)",modelValue:e(a).referral_code,"onUpdate:modelValue":m[0]||(m[0]=V=>e(a).referral_code=V)},null,8,["modelValue"]),s("div",Je,[Ke,s("div",Le,[t(p,{class:"w-full bg-white border border-green-500 rounded",ref_key:"signaturePad",ref:o},null,512),t(l,{class:"mt-2",field:"signature",errors:e(b).errors,message:"Signature required"},null,8,["errors"])])]),s("small",{class:"font-bold cursor-pointer",onClick:d},"Clear Signature"),s("div",We,[t(f,{disabled:v.loading,"no-icon":"",text:v.loading?"Please Wait ---":"Start Your Claim",onClick:r},null,8,["disabled","text"]),t(x,{text:"Back",onClick:m[1]||(m[1]=V=>n.$emit("backward"))})])],64)}}},Ze={__name:"modal",setup(v){const u=F("emitter");let _=P({assessmentModal:!1});return H(()=>{u.on("toggleModal",({name:o,show:b})=>{_[o]=b})}),(o,b)=>{const d=i("ModalMarkup"),r=i("vue-final-modal");return y(),E(r,{classes:"flex justify-center items-center","content-class":"relative flex flex-col w-[500px] max-h-full mx-4 border rounded bg-white",modelValue:e(_).assessmentModal,"onUpdate:modelValue":b[0]||(b[0]=a=>e(_).assessmentModal=a)},{default:A(({close:a})=>[t(d,{title:"Warning!!!",text:e(U).self_assessment,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"])}}},Qe={class:"relative left-1/2 -translate-x-1/2 w-[97vw] md:w-[99vw] mt-6 md:mt-4"},Xe={class:"max-w-[1000px] mx-auto"},et={class:"p-1 mx-auto"},tt={class:"flex items-center"},ot={class:"max-w-[700px] mx-auto mt-10 md:mt-20 bg-orange-50 py-5 px-3 lg:px-7 box-border"},lt={key:0,class:"swizard_page1"},st={key:1,class:"swizard_page1"},rt={key:2,class:"swizard_page2"},nt={key:3,class:"swizard_page3"},at={key:4,class:"swizard_page4"};function it(v,u,_,o,b,d){return y(),k(I,null,[t(o.Modal),s("div",Qe,[s("div",Xe,[s("div",et,[s("div",tt,[(y(!0),k(I,null,O(o.state.steps,(r,a)=>(y(),E(o.ProgressStep,{"is-last":o.state.steps.length==a+1,key:a,title:r.title,number:r.number,step:a+1,current:o.state.step},null,8,["is-last","title","number","step","current"]))),128))]),s("div",ot,[o.state.step==1?(y(),k("div",lt,[t(o.Criteria,{modelValue:o.state.form[0],"onUpdate:modelValue":u[0]||(u[0]=r=>o.state.form[0]=r),onForward:o.stepForward},null,8,["modelValue"])])):N("",!0),o.state.step==2?(y(),k("div",st,[t(o.Claim,{modelValue:o.state.form[1],"onUpdate:modelValue":u[1]||(u[1]=r=>o.state.form[1]=r),onForward:o.stepForward},null,8,["modelValue"])])):N("",!0),o.state.step==3?(y(),k("div",rt,[t(o.About,{modelValue:o.state.form[2],"onUpdate:modelValue":u[2]||(u[2]=r=>o.state.form[2]=r),onForward:o.stepForward,onBackward:o.stepBack},null,8,["modelValue"])])):N("",!0),o.state.step==4?(y(),k("div",nt,[t(o.Contact,{modelValue:o.state.form[3],"onUpdate:modelValue":u[3]||(u[3]=r=>o.state.form[3]=r),onForward:o.stepForward,onBackward:o.stepBack},null,8,["modelValue"])])):N("",!0),o.state.step==5?(y(),k("div",at,[t(o.StartClaim,{modelValue:o.state.form[4],"onUpdate:modelValue":u[4]||(u[4]=r=>o.state.form[4]=r),onForward:o.submit,onBackward:o.stepBack,loading:o.state.loading},null,8,["modelValue","loading"])])):N("",!0)])])])])],64)}const ut={__name:"App",setup(v,{expose:u}){u();function _(){g.step>=1&&g.step<=5&&(g.step++,d())}function o(){g.step>1&&g.step<=5&&(g.step--,d())}async function b(){g.loading=!0;const a={...g.form[0],...g.form[1],...g.form[2],...g.form[3],...g.form[4]},n=await $.post(g.url,a);g.loading=!1,window.open("/thank-you?reference="+n.data.claimID,"_blank")}function d(){document.getElementById("app").scrollIntoView()}const r={stepForward:_,stepBack:o,submit:b,scrollUp:d,computed:q,onMounted:H,ref:D,axios:$,state:g,Reusable:M,Criteria:ge,Claim:Me,About:Oe,Contact:Ye,StartClaim:Ge,ProgressStep:se,Modal:Ze};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},dt=L(ut,[["render",it]]),mt=fe(),Y=W(dt);Y.provide("emitter",mt);Y.use(G).component("IconInfo",Z).component("IconNext",Q).component("IconPrevious",X).component("IconSelect",ee).component("HasError",re).component("NextButton",ne).component("BackButton",ae).component("VueFinalModal",te).component("ModalMarkup",ie).component("RadioBox",ue).component("Question",de).component("InputText",me).component("InputSelect",ce).component("SignCheckbox",pe).component("StepTitle",_e).mount("#app");
