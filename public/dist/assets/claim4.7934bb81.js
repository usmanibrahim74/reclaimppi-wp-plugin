import{r as P,C as O,k as M,a as d,o as y,c as k,b as o,d as r,F as I,A as t,e as F,f as E,w as A,t as K,h as N,R as q,i as D,j as H,_ as L,l as $,m as W,p as G,I as Z,q as Q,s as X,u as ee,E as te}from"./reuseable.6619a4c7.js";import{_ as oe,G as se,a as le,H as re,b as ne,c as ae,d as ie,e as ue,f as de,g as me,h as ce,i as pe,j as _e}from"./ProgressStep.97bc916f.js";function fe(b){return{all:b=b||new Map,on:function(l,i){var e=b.get(l);e?e.push(i):b.set(l,[i])},off:function(l,i){var e=b.get(l);e&&(i?e.splice(e.indexOf(i)>>>0,1):b.set(l,[]))},emit:function(l,i){var e=b.get(l);e&&e.slice().map(function(p){p(i)}),(e=b.get("*"))&&e.slice().map(function(p){p(l,i)})}}}const be=["Mr","Mrs","Miss","Ms","Dr"],xe=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],T={year_1:null,year_2:null,year_3:null,year_4:null},z={title:null,first_name:null,last_name:null},R={day:null,month:null,year:null},U={self_assessment:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years:"A rough estimate of amount you've received in pounds (\xA3)"},v=P({url:"/ReclaimPPI/lead",step:1,loading:!1,steps:[{title:"Criteria",number:1},{title:"PPI Claim Details",number:2},{title:"About You",number:3},{title:"Contact Details",number:4},{title:"Start Claim",number:5}],form:[{self_assessment:null},{...T,less_earning:null,ni_number:null,cant_remember:null},{...z,...R},{email:null,phone:null,address:null,postcode:null,agree:null},{referral_code:null,signature:null}]}),ge={class:"mt-6 mb-4"},ye={__name:"criteria",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(b,{emit:l}){const i=b,e=O("emitter");P({required:["self_assessment"],errors:[]});const p=M({get(){return i.modelValue},set(a){l("update:modelValue",a)}});function m(){p.self_assessment=!1,u()}function n(){p.self_assessment=!0,e.emit("toggleModal",{name:"assessmentModal",show:!0})}function u(){l("forward")}return(a,c)=>{const _=d("step-title"),f=d("question");return y(),k(I,null,[o(_,{title:"Is the below statement true?"}),r("div",ge,[o(f,{labelFor:"",class:"text-center max-w-[450px] mx-auto",text:"Please press proceed if you were NOT self-employed the year you got your PPI refund."}),r("div",{class:"flex flex-col md:flex-row gap-5 justify-center mt-6"},[r("button",{onClick:m,type:"button",class:"border-red-600 border-solid border-2 font-medium text-red-600 flex items-center justify-center py-4 px-20 rounded"}," Proceed "),r("button",{type:"button",class:"border-red-600 border-solid border-2 font-medium text-red-600 flex items-center justify-center py-4 px-20 rounded",onClick:n}," I was self-employed ")])])],64)}}},ve={class:"mt-6 mb-4"},Ve={class:"grid sm:grid-cols-2 sm:justify-items-center gap-x-6"},we={class:"flex justify-start w-full mt-4"},he={class:"mt-6 mb-4"},ke={class:"flex my-2"},Be={class:"mt-6 mb-2"},Ie={class:"absolute right-2 top-11 cursor-pointer group duration-300"},Ce={class:"absolute hidden group-hover:flex -left-[145px] sm:-left-[285px] -top-4 -translate-y-full sm:w-80 w-44 px-2 py-1 bg-gray-700 rounded-lg text-white text-sm after:content-[''] after:absolute after:right-[2%] after:top-[100%] after:-translate-x-1/2 after:border-8 after:border-x-transparent after:border-b-transparent after:border-t-gray-700"},Pe={class:"mt-2"},Ne={class:"flex items-center mt-2 mb-6"},Me={class:"flex items-center justify-center"},qe={__name:"claim",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(b,{emit:l}){const i=b,{filterEmptyKeys:e,hasEvery:p,arrayIntersection:m,range:n}=q();let u=P({showAssessmentModal:!1,required:["years","less_earning","ni_number"],errors:[]});const a=M({get(){return i.modelValue},set(f){l("update:modelValue",f)}});function c(){const f=i.modelValue;let s=Object.values(u.required);s.includes("ni_number")&&f.cant_remember&&s.splice(s.indexOf("ni_number"),1);const x=e(f);let g=m(x,s);p(Object.keys(T),x)&&g.push("years");var V=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");return![null,""].includes(f.ni_number)&&!V.test(f.ni_number)&&g.push("invalid_ni"),u.errors=[...g],!u.errors.length}function _(){c()&&l("forward")}return(f,s)=>{const x=d("step-title"),g=d("question"),V=d("HasError"),C=d("radio-box"),w=d("IconInfo"),j=d("input-text"),S=d("sign-checkbox"),h=d("NextButton");return y(),k(I,null,[o(x,{title:"Please enter your PPI Claim details"}),t(a)?(y(),k(I,{key:0},[r("div",ve,[o(g,{text:`Please provide us with the TOTAL amount you
                received for your PPI refunds in the relevant tax
                years below:`}),r("div",Ve,[(y(!0),k(I,null,F(t(n)(1,1,4),B=>(y(),E(oe,{modelValue:t(a)["year_"+B],"onUpdate:modelValue":J=>t(a)["year_"+B]=J,label:`Apr ${2018+B-1} - Mar ${2018+B}`,tooltip:t(U).years},null,8,["modelValue","onUpdate:modelValue","label","tooltip"]))),256)),r("div",we,[o(V,{field:"years",errors:t(u).errors,message:"Please fill at least one record"},null,8,["errors"])])])]),r("div",he,[o(g,{text:`Were you earning less than \xA350,000 a year at the
                time you received your PPI refund?`}),r("div",ke,[o(C,{name:"less_earning",modelValue:t(a).less_earning,"onUpdate:modelValue":s[0]||(s[0]=B=>t(a).less_earning=B),value:!0,label:"Yes"},null,8,["modelValue"]),o(C,{name:"less_earning",modelValue:t(a).less_earning,"onUpdate:modelValue":s[1]||(s[1]=B=>t(a).less_earning=B),value:!1,label:"No"},null,8,["modelValue"])]),o(V,{field:"less_earning",errors:t(u).errors},null,8,["errors"])]),r("div",Be,[o(j,{label:"National Insurance (NI) Number",modelValue:t(a).ni_number,"onUpdate:modelValue":s[2]||(s[2]=B=>t(a).ni_number=B)},{default:A(()=>[r("span",Ie,[o(w),r("span",Ce,K(t(U).ni),1)])]),_:1},8,["modelValue"]),r("div",Pe,[o(V,{field:"invalid_ni",errors:t(u).errors,message:"Invalid NI Number"},null,8,["errors"]),o(V,{field:"ni_number",errors:t(u).errors},null,8,["errors"])])]),r("div",Ne,[o(S,{modelValue:t(a).cant_remember,"onUpdate:modelValue":s[3]||(s[3]=B=>t(a).cant_remember=B),value:!0,label:"Can't remember (Provide it later)",disabled:f.niCheckDisabled},null,8,["modelValue","disabled"])]),r("div",Me,[o(h,{text:"Continue",onClick:_})])],64)):N("",!0)],64)}}},je={class:"flex flex-col sm:flex-row mt-6"},Se={class:"basis-1/3 pr-2"},Ue={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},Ee={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},$e={class:"flex flex-col sm:flex-row"},Oe={class:"flex items-center justify-center flex-col"},Fe={__name:"about",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(b,{emit:l}){const i=b,{range:e,hasSome:p,filterEmptyKeys:m,arrayIntersection:n}=q();let u=P({required:["name","dob"],errors:[]});const a=M({get(){return console.log(i),i.modelValue},set(f){l("update:modelValue",f)}});function c(){const f=i.modelValue;let s=Object.values(u.required);const x=m(f);let g=n(x,s);return p(Object.keys(z),x)&&g.push("name"),p(Object.keys(R),x)&&g.push("dob"),u.errors=[...g],!u.errors.length}function _(){c()&&l("forward")}return(f,s)=>{const x=d("step-title"),g=d("input-select"),V=d("input-text"),C=d("HasError"),w=d("question"),j=d("NextButton"),S=d("BackButton");return y(),k(I,null,[o(x,{title:"Please complete your details below to start your claim"}),r("div",je,[r("div",Se,[o(g,{class:"",label:"Title",options:t(be),modelValue:t(a).title,"onUpdate:modelValue":s[0]||(s[0]=h=>t(a).title=h)},null,8,["options","modelValue"])]),r("div",Ue,[o(V,{class:"",label:"First Name",modelValue:t(a).first_name,"onUpdate:modelValue":s[1]||(s[1]=h=>t(a).first_name=h)},null,8,["modelValue"])]),r("div",Ee,[o(V,{class:"",label:"Last Name",modelValue:t(a).last_name,"onUpdate:modelValue":s[2]||(s[2]=h=>t(a).last_name=h)},null,8,["modelValue"])])]),o(C,{class:"mt-1",field:"name",errors:t(u).errors,message:"The above fields are required"},null,8,["errors"]),o(w,{class:"mt-6",text:"DOB"}),r("div",$e,[o(g,{class:"basis-1/3 pr-2",label:"Day","in-select":"",options:t(e)(1,1,31),modelValue:t(a).day,"onUpdate:modelValue":s[3]||(s[3]=h=>t(a).day=h)},null,8,["options","modelValue"]),o(g,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Month","in-select":"",options:t(xe),modelValue:t(a).month,"onUpdate:modelValue":s[4]||(s[4]=h=>t(a).month=h)},null,8,["options","modelValue"]),o(g,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Year","in-select":"",options:t(e)(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:t(a).year,"onUpdate:modelValue":s[5]||(s[5]=h=>t(a).year=h)},null,8,["options","modelValue"])]),o(C,{class:"mt-1",field:"dob",errors:t(u).errors,message:"The above fields are required"},null,8,["errors"]),r("div",Oe,[o(j,{class:"mt-8 mb-2",text:"Continue",onClick:_}),o(S,{class:"font-bold",text:"Back",onClick:s[6]||(s[6]=h=>f.$emit("backward"))})])],64)}}},Ae={class:"mt-6"},De={class:"mt-6"},He={class:"mt-6"},Te={class:"mt-6"},ze={class:"flex items-center mt-4 text-sm"},Re={class:"flex items-center justify-center flex-col mt-7"},Ye={__name:"contact",props:{modelValue:{type:Object,required:!0},messages:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(b,{emit:l}){const i=b,{filterEmptyKeys:e,arrayIntersection:p}=q();let m=P({required:["phone","address","postcode","agree","signature"],errors:[]});const n=M({get(){return console.log(i),i.modelValue},set(c){l("update:modelValue",c)}});function u(){const c=i.modelValue;let _=Object.values(m.required);const f=e(c);let s=p(f,_);var x=/\S+@\S+\.\S+/;return c.email!=null&&!x.test(c.email)&&s.push("invalid_email"),c.phone!=null&&(c.phone.length!=11||c.phone.charAt(0)!="0")&&s.push("invalid_phone"),!c.agree&&!s.includes("agree")&&s.push("agree"),m.errors=[...s],!m.errors.length}function a(){u()&&l("forward")}return(c,_)=>{const f=d("step-title"),s=d("input-text"),x=d("HasError"),g=d("sign-checkbox"),V=d("NextButton"),C=d("BackButton");return y(),k(I,null,[o(f,{title:"Enter your contact details to claim your tax back"}),r("div",null,[r("div",Ae,[o(s,{type:"email",label:"Email",modelValue:t(n).email,"onUpdate:modelValue":_[0]||(_[0]=w=>t(n).email=w)},null,8,["modelValue"]),o(x,{class:"mt-1",field:"email",errors:t(m).errors},null,8,["errors"]),o(x,{class:"mt-1",field:"invalid_email",errors:t(m).errors,message:"Invalid Email"},null,8,["errors"])]),r("div",De,[o(s,{type:"tel",label:"Phone Number",modelValue:t(n).phone,"onUpdate:modelValue":_[1]||(_[1]=w=>t(n).phone=w)},null,8,["modelValue"]),o(x,{class:"mt-1",field:"phone",errors:t(m).errors},null,8,["errors"]),o(x,{class:"mt-1",field:"invalid_phone",errors:t(m).errors,message:"Invalid Phone Number"},null,8,["errors"])]),r("div",He,[o(s,{label:"Address",modelValue:t(n).address,"onUpdate:modelValue":_[2]||(_[2]=w=>t(n).address=w)},null,8,["modelValue"]),o(x,{class:"mt-1",field:"address",errors:t(m).errors},null,8,["errors"])]),r("div",Te,[o(s,{label:"Postcode",modelValue:t(n).postcode,"onUpdate:modelValue":_[3]||(_[3]=w=>t(n).postcode=w)},null,8,["modelValue"]),o(x,{class:"mt-1",field:"postcode",errors:t(m).errors},null,8,["errors"])])]),r("div",ze,[o(g,{modelValue:t(n).agree,"onUpdate:modelValue":_[4]||(_[4]=w=>t(n).agree=w),value:!0,label:"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes."},null,8,["modelValue"])]),o(x,{class:"mt-2",field:"agree",errors:t(m).errors},null,8,["errors"]),r("div",Re,[o(V,{text:"Continue",onClick:a}),o(C,{text:"Back",onClick:_[5]||(_[5]=w=>c.$emit("backward"))})])],64)}}},Je={class:"mt-6 mb-1"},Ke=r("p",{class:"mb-1"}," Please draw your signature below in the green box. ",-1),Le={class:""},We={class:"flex items-center justify-center flex-col mt-8"},Ge={__name:"start-claim",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["update:modelValue","forward"],setup(b,{emit:l}){const i=b,e=D(null);let p=P({errors:[]});function m(){e.value.clearSignature()}function n(){const{isEmpty:a,data:c}=e.value.saveSignature();if(a){p.errors.push("signature");return}u.value.signature=c,l("forward")}const u=M({get(){return i.modelValue},set(a){return new Proxy(i.modelValue,{set(c,_,f){return l("update:modelValue",{...c,[_]:f}),!0}})}});return(a,c)=>{const _=d("input-text"),f=d("VueSignaturePad"),s=d("HasError"),x=d("NextButton"),g=d("BackButton");return y(),k(I,null,[o(se),o(_,{label:"Do you have a referral code? (optional)",modelValue:t(u).referral_code,"onUpdate:modelValue":c[0]||(c[0]=V=>t(u).referral_code=V)},null,8,["modelValue"]),r("div",Je,[Ke,r("div",Le,[o(f,{class:"w-full bg-white border border-green-500 rounded",ref_key:"signaturePad",ref:e},null,512),o(s,{class:"mt-2",field:"signature",errors:t(p).errors,message:"Signature required"},null,8,["errors"])])]),r("small",{class:"font-bold cursor-pointer",onClick:m},"Clear Signature"),r("div",We,[o(x,{disabled:b.loading,"no-icon":"",text:b.loading?"Please Wait ---":"Start Your Claim",onClick:n},null,8,["disabled","text"]),o(g,{text:"Back",onClick:c[1]||(c[1]=V=>a.$emit("backward"))})])],64)}}},Ze={__name:"modal",setup(b){const l=O("emitter");let i=P({assessmentModal:!1});return H(()=>{l.on("toggleModal",({name:e,show:p})=>{i[e]=p})}),(e,p)=>{const m=d("ModalMarkup"),n=d("vue-final-modal");return y(),E(n,{classes:"flex justify-center items-center","content-class":"relative flex flex-col w-[500px] max-h-full mx-4 border rounded bg-white",modelValue:t(i).assessmentModal,"onUpdate:modelValue":p[0]||(p[0]=u=>t(i).assessmentModal=u)},{default:A(({close:u})=>[o(m,{title:"Warning!!!",text:t(U).self_assessment,onClose:u},null,8,["text","onClose"])]),_:1},8,["modelValue"])}}},Qe={class:"relative left-1/2 -translate-x-1/2 w-[97vw] md:w-[99vw] mt-6 md:mt-4"},Xe={class:"max-w-[1000px] mx-auto"},et={class:"p-3 mx-auto"},tt={class:"flex items-center"},ot={class:"max-w-[700px] mx-auto mt-10 md:mt-20 bg-orange-50 py-5 px-5 lg:px-7 box-border"},st={key:0,class:"swizard_page1"},lt={key:1,class:"swizard_page1"},rt={key:2,class:"swizard_page2"},nt={key:3,class:"swizard_page3"},at={key:4,class:"swizard_page4"};function it(b,l,i,e,p,m){return y(),k(I,null,[o(e.Modal),r("div",Qe,[r("div",Xe,[r("div",et,[r("div",tt,[(y(!0),k(I,null,F(e.state.steps,(n,u)=>(y(),E(e.ProgressStep,{"is-last":e.state.steps.length==u+1,key:u,title:n.title,number:n.number,step:u+1,current:e.state.step},null,8,["is-last","title","number","step","current"]))),128))]),r("div",ot,[e.state.step==1?(y(),k("div",st,[o(e.Criteria,{modelValue:e.state.form[0],"onUpdate:modelValue":l[0]||(l[0]=n=>e.state.form[0]=n),onForward:e.stepForward},null,8,["modelValue"])])):N("",!0),e.state.step==2?(y(),k("div",lt,[o(e.Claim,{modelValue:e.state.form[1],"onUpdate:modelValue":l[1]||(l[1]=n=>e.state.form[1]=n),onForward:e.stepForward},null,8,["modelValue"])])):N("",!0),e.state.step==3?(y(),k("div",rt,[o(e.About,{modelValue:e.state.form[2],"onUpdate:modelValue":l[2]||(l[2]=n=>e.state.form[2]=n),onForward:e.stepForward,onBackward:e.stepBack},null,8,["modelValue"])])):N("",!0),e.state.step==4?(y(),k("div",nt,[o(e.Contact,{modelValue:e.state.form[3],"onUpdate:modelValue":l[3]||(l[3]=n=>e.state.form[3]=n),onForward:e.stepForward,onBackward:e.stepBack},null,8,["modelValue"])])):N("",!0),e.state.step==5?(y(),k("div",at,[o(e.StartClaim,{modelValue:e.state.form[4],"onUpdate:modelValue":l[4]||(l[4]=n=>e.state.form[4]=n),onForward:e.submit,onBackward:e.stepBack,loading:e.state.loading},null,8,["modelValue","loading"])])):N("",!0)])])])])],64)}const ut={__name:"App",setup(b,{expose:l}){l();function i(){v.step>=1&&v.step<=5&&(v.step++,m())}function e(){v.step>1&&v.step<=5&&(v.step--,m())}async function p(){v.loading=!0;const u={...v.form[0],...v.form[1],...v.form[2],...v.form[3],...v.form[4]},a=await $.post(v.url,u);v.loading=!1,window.location.href="/thank-you?reference="+a.data.claimID}function m(){document.getElementById("app").scrollIntoView()}const n={stepForward:i,stepBack:e,submit:p,scrollUp:m,computed:M,onMounted:H,ref:D,axios:$,state:v,Reusable:q,Criteria:ye,Claim:qe,About:Fe,Contact:Ye,StartClaim:Ge,ProgressStep:le,Modal:Ze};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}},dt=L(ut,[["render",it]]),mt=fe(),Y=W(dt);Y.provide("emitter",mt);Y.use(G).component("IconInfo",Z).component("IconNext",Q).component("IconPrevious",X).component("IconSelect",ee).component("HasError",re).component("NextButton",ne).component("BackButton",ae).component("VueFinalModal",te).component("ModalMarkup",ie).component("RadioBox",ue).component("Question",de).component("InputText",me).component("InputSelect",ce).component("SignCheckbox",pe).component("StepTitle",_e).mount("#app");
