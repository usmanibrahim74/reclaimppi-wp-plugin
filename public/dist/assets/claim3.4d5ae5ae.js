import{r as Y,a as f,o as d,c as _,b as t,w as v,d as o,F as H,e as J,f as P,n as Q,h as g,t as W,g as C,v as S,_ as G,i as B,j as M,k as A,l as N,R as U,m as L,p as Z,I as K,q as X,s as $,u as ee,V as ae}from"./reuseable.a04738ad.js";import{_ as te,a as le,G as oe,b as se,c as re,d as ne,e as ie,f as de,H as me,g as ue,h as _e,i as ce}from"./InputSelect.d78a4e30.js";const T={year_1:null,year_2:null,year_3:null,year_4:null},F={title:null,first_name:null,last_name:null},R={day:null,month:null,year:null},s=Y({url:"/ReclaimPPI/lead",step:1,showAssesmentModal:!1,showYearsInfoModal:!1,showNIModal:!1,loading:!1,self_assesment_message:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni_message:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years_message:"A rough estimate of amount you've received in pounds (\xA3)",errors:[],year:Object.keys(T),name:Object.keys(F),dob:Object.keys(R),steps:[{title:"Criteria Question",number:1},{title:"PPI Claim Details",number:2},{title:"About You",number:3},{title:"Contact Details",number:4},{title:"Start Claim",number:5}],required:[["self_assesment","year","less_earning","ni_number"],["name","dob"],["email","phone","address","postcode","agree","signature"]],form:[{},{self_assesment:null,...T,less_earning:null,ni_number:null,cant_remember:null},{...F,...R},{email:null,phone:null,address:null,postcode:null,agree:null},{referral_code:null,signature:null}]}),fe=["Mr","Mrs","Miss","Ms","Dr"],be=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],pe={title:fe,months:be},ye={class:"smodal"},ge={class:"smodal__body"},ve={class:"swizard"},Ve={class:"sprogress-bar"},we={key:0,class:"swizard__step swizard_page1"},he=o("div",{class:"swizard__title"},[o("p",{class:"swizard__title__p"}," I was NOT self employed the year I received my PPI refund. ")],-1),xe={key:1,class:"swizard__step swizard_page1"},Ie=o("div",{class:"swizard__title"},[o("p",{class:"swizard__title__p"}," Please provide us with the TOTAL amount you received for your PPI refunds in the relevant tax years below: ")],-1),ke={class:"swizard__years",style:{position:"relative","z-index":"2"}},ze={class:"swizard__input__item__right-icon ni-number"},Pe={class:"tooltip"},Ce={class:"top"},Se=o("i",null,null,-1),Be={class:"swizard__sign__checkbox"},Me=["disabled"],Ae=o("label",{for:"cant_remember"},"Can't remember (Provide it later) ",-1),Ne={key:0,class:"swizard__submit"},Ue={key:2,class:"swizard__step swizard_page2"},Te={class:"swizard__about"},Fe=o("p",{style:{"margin-bottom":"5px","margin-top":"20px","font-weight":"bold"}},"DOB",-1),Re={class:"swizard__about"},De={class:"swizard__submit"},Ee={key:3,class:"swizard__step swizard_page3"},Oe={class:"swizard__sign__checkbox",style:{"margin-top":"10px !important"}},qe=o("label",{for:"agreed"},[o("small",null,"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes.")],-1),je={class:"swizard__submit"},Ye={key:4,class:"swizard__step swizard_page4"},He={class:"swizard__input"},Je=o("p",null,"Please draw your signature below in the green box.",-1),Qe={class:"swizard__input__item"},We={class:"swizard__submit"};function Ge(D,l,V,e,w,h){const x=f("ModalMarkup"),p=f("vue-final-modal"),r=f("HasError"),I=f("IconInfo"),c=f("NextButton"),y=f("BackButton"),k=f("VueSignaturePad");return d(),_("div",ye,[t(p,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showAssesmentModal,"onUpdate:modelValue":l[0]||(l[0]=a=>e.state.showAssesmentModal=a)},{default:v(({close:a})=>[t(x,{title:"Warning!!!",text:e.state.self_assesment_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),o("div",ge,[o("div",ve,[o("div",Ve,[(d(!0),_(H,null,J(e.state.steps,(a,u)=>(d(),P(e.ProgressStep,{class:Q({"is-last":e.state.steps.length==u+1,"is-first":u==0}),key:u,title:a.title,number:a.number,step:u+1,current:e.state.step},null,8,["class","title","number","step","current"]))),128))]),e.state.step==1?(d(),_("div",we,[t(e.StepTitle,{title:"Is the below statement true?"}),he,o("div",{class:"centered-btns"},[o("button",{type:"button",class:"sbutton sbutton__primary sbutton__outline",onClick:e.criteriaFailed}," Yes "),o("button",{type:"button",class:"sbutton sbutton__primary",onClick:e.stepForward}," No ")])])):g("",!0),e.state.step==2?(d(),_("div",xe,[t(e.StepTitle,{title:"Please enter your PPI Claim details"}),t(e.RadioQuestion,{style:{position:"relative","z-index":"1"},question:"Were you required to complete a Self-Assessment the year you got your PPI refund?",field:"self_assesment",errors:e.state.errors},{default:v(()=>[t(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":[l[1]||(l[1]=a=>e.state.form[0].self_assesment=a),e.selfAssesedClick],value:!0,label:"Yes"},null,8,["modelValue"]),t(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":l[2]||(l[2]=a=>e.state.form[0].self_assesment=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),Ie,o("div",ke,[t(e.AmountBox,{modelValue:e.state.form[0].year_1,"onUpdate:modelValue":l[3]||(l[3]=a=>e.state.form[0].year_1=a),label:"Apr 2018 - Mar 2019",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(e.AmountBox,{modelValue:e.state.form[0].year_2,"onUpdate:modelValue":l[4]||(l[4]=a=>e.state.form[0].year_2=a),label:"Apr 2019 - Mar 2020",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(e.AmountBox,{modelValue:e.state.form[0].year_3,"onUpdate:modelValue":l[5]||(l[5]=a=>e.state.form[0].year_3=a),label:"Apr 2020 - Mar 2021",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(e.AmountBox,{modelValue:e.state.form[0].year_4,"onUpdate:modelValue":l[6]||(l[6]=a=>e.state.form[0].year_4=a),label:"Apr 2021 - Mar 2022",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(r,{field:"year",errors:e.state.errors,message:"Please fill at least one record"},null,8,["errors"])]),t(e.RadioQuestion,{style:{position:"relative","z-index":"1"},question:"Were you earning less than \xA350,000 a year at the time you received your PPI refund?",field:"less_earning",errors:e.state.errors},{default:v(()=>[t(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":l[7]||(l[7]=a=>e.state.form[0].less_earning=a),value:!0,label:"Yes"},null,8,["modelValue"]),t(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":l[8]||(l[8]=a=>e.state.form[0].less_earning=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),t(e.InputText,{style:{position:"relative","z-index":"2"},label:"National insurance (NI) Number",modelValue:e.state.form[0].ni_number,"onUpdate:modelValue":l[9]||(l[9]=a=>e.state.form[0].ni_number=a)},{default:v(()=>[o("span",ze,[o("div",Pe,[t(I),o("div",Ce,[o("p",null,W(e.state.ni_message),1),Se])])])]),_:1},8,["modelValue"]),t(r,{field:"invalid_ni",errors:e.state.errors,message:"Invalid NI Number"},null,8,["errors"]),t(r,{field:"ni_number",errors:e.state.errors},null,8,["errors"]),o("div",Be,[C(o("input",{id:"cant_remember",disabled:e.niCheckDisabled,type:"checkbox",value:!0,"onUpdate:modelValue":l[10]||(l[10]=a=>e.state.form[0].cant_remember=a)},null,8,Me),[[S,e.state.form[0].cant_remember]]),Ae]),e.state.form[0].self_assesment?(d(),P(r,{key:1,style:{"text-align":"center"},field:"already_assessed",errors:["already_assessed"],message:e.state.self_assesment_message},null,8,["message"])):(d(),_("div",Ne,[t(c,{text:"Continue",onClick:e.stepForward})]))])):g("",!0),e.state.step==3?(d(),_("div",Ue,[t(e.StepTitle,{title:"Please complete your details below to start your claim"}),o("div",Te,[t(e.InputSelect,{class:"swizard__about__item",label:"Title",options:e.options.title,modelValue:e.state.form[1].title,"onUpdate:modelValue":l[11]||(l[11]=a=>e.state.form[1].title=a)},null,8,["options","modelValue"]),t(e.InputText,{class:"swizard__about__item",label:"First Name",modelValue:e.state.form[1].first_name,"onUpdate:modelValue":l[12]||(l[12]=a=>e.state.form[1].first_name=a)},null,8,["modelValue"]),t(e.InputText,{class:"swizard__about__item",label:"Last Name",modelValue:e.state.form[1].last_name,"onUpdate:modelValue":l[13]||(l[13]=a=>e.state.form[1].last_name=a)},null,8,["modelValue"])]),t(r,{field:"name",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),Fe,o("div",Re,[t(e.InputSelect,{class:"swizard__about__item",label:"Day","in-select":"",options:e.range(1,1,31),modelValue:e.state.form[1].day,"onUpdate:modelValue":l[14]||(l[14]=a=>e.state.form[1].day=a)},null,8,["options","modelValue"]),t(e.InputSelect,{class:"swizard__about__item",label:"Month","in-select":"",options:e.options.months,modelValue:e.state.form[1].month,"onUpdate:modelValue":l[15]||(l[15]=a=>e.state.form[1].month=a)},null,8,["options","modelValue"]),t(e.InputSelect,{class:"swizard__about__item",label:"Year","in-select":"",options:e.range(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e.state.form[1].year,"onUpdate:modelValue":l[16]||(l[16]=a=>e.state.form[1].year=a)},null,8,["options","modelValue"])]),t(r,{field:"dob",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),o("div",De,[t(c,{text:"Continue",onClick:e.stepForward}),t(y,{text:"Back",onClick:e.stepBack})])])):g("",!0),e.state.step==4?(d(),_("div",Ee,[t(e.StepTitle,{title:"Enter your contact details to claim your tax back"}),t(e.InputText,{type:"email",label:"Email",modelValue:e.state.form[2].email,"onUpdate:modelValue":l[17]||(l[17]=a=>e.state.form[2].email=a)},null,8,["modelValue"]),t(r,{field:"email",errors:e.state.errors},null,8,["errors"]),t(r,{field:"invalid_email",errors:e.state.errors,message:"Invalid Email"},null,8,["errors"]),t(e.InputText,{type:"tel",label:"Phone Number",modelValue:e.state.form[2].phone,"onUpdate:modelValue":l[18]||(l[18]=a=>e.state.form[2].phone=a)},null,8,["modelValue"]),t(r,{field:"phone",errors:e.state.errors},null,8,["errors"]),t(r,{field:"invalid_phone",errors:e.state.errors,message:"Invalid Phone Number"},null,8,["errors"]),t(e.InputText,{label:"Address",modelValue:e.state.form[2].address,"onUpdate:modelValue":l[19]||(l[19]=a=>e.state.form[2].address=a)},null,8,["modelValue"]),t(r,{field:"address",errors:e.state.errors},null,8,["errors"]),t(e.InputText,{label:"Postcode",modelValue:e.state.form[2].postcode,"onUpdate:modelValue":l[20]||(l[20]=a=>e.state.form[2].postcode=a)},null,8,["modelValue"]),t(r,{field:"postcode",errors:e.state.errors},null,8,["errors"]),o("div",Oe,[C(o("input",{id:"agreed",type:"checkbox",value:1,"onUpdate:modelValue":l[21]||(l[21]=a=>e.state.form[2].agree=a)},null,512),[[S,e.state.form[2].agree]]),qe]),t(r,{field:"agree",errors:e.state.errors},null,8,["errors"]),o("div",je,[t(c,{text:"Continue",onClick:e.stepForward}),t(y,{text:"Back",onClick:e.stepBack})])])):g("",!0),e.state.step==4?(d(),_("div",Ye,[t(e.GreatNews),t(e.InputText,{label:"Do you have a referral code? (optional)",modelValue:e.state.form[3].referal_code,"onUpdate:modelValue":l[22]||(l[22]=a=>e.state.form[3].referal_code=a)},null,8,["modelValue"]),o("div",He,[Je,o("div",Qe,[t(k,{width:"100%",height:"200px",style:{border:"1px solid green","background-color":"white"},ref:"signaturePad"},null,512),t(r,{field:"signature",errors:e.state.errors,message:"Signature required"},null,8,["errors"])])]),o("small",{class:"clear-signature",onClick:e.clearSignature},"Clear Signature"),o("div",We,[t(c,{disabled:e.state.loading,"no-icon":"",text:e.state.loading?"Please Wait ---":"Start Your Claim",onClickOnce:e.submit},null,8,["disabled","text"]),t(y,{text:"Back",onClick:e.stepBack})])])):g("",!0)])])])}const Le={__name:"App",setup(D,{expose:l}){l();const{filterEmptyKeys:V,hasSome:e,hasEvery:w,arrayIntersection:h,range:x}=U(),p=B(null);M(()=>{});const r=A(()=>{var m;return s.form[0].cant_remember=!1,(m=s.form[0].ni_number)==null?void 0:m.length});function I(){setTimeout(()=>{console.log(s.form[0]),s.showAssesmentModal=!0},0)}function c(){const m=Object.values(s.required[s.step-1]),n=s.form[s.step-1];m.includes("ni_number")&&n.cant_remember&&m.splice(m.indexOf("ni_number"),1);const b=V(n);let i=h(b,m);if(s.step==2){w(Object.values(s.year),b)&&i.push("year"),n.self_assesment&&i.push("already_assessed");var q=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");![null,""].includes(n.ni_number)&&!q.test(n.ni_number)&&i.push("invalid_ni")}if(s.step==3&&(e(Object.values(s.name),b)&&i.push("name"),e(Object.values(s.dob),b)&&i.push("dob")),s.step==4){var j=/\S+@\S+\.\S+/;n.email!=null&&!j.test(n.email)&&i.push("invalid_email"),n.phone!=null&&(n.phone.length!=11||n.phone.charAt(0)!="0")&&i.push("invalid_phone"),!n.agree&&!i.includes("agree")&&i.push("agree")}return s.errors=[...i],!s.errors.length}function y(){}function k(){c()&&s.step>=1&&s.step<=5&&(s.step++,u())}function a(){s.step>1&&s.step<=5&&(s.step--,u())}function u(){document.getElementById("app").scrollIntoView()}function E(){p.value.clearSignature()}async function O(){const{isEmpty:m,data:n}=p.value.saveSignature();if(m){s.errors.push("signature");return}s.loading=!0,s.form[3].signature=n;const b={...s.form[0],...s.form[1],...s.form[2],...s.form[3]},i=await N.post(s.url,b);window.location.href="/thank-you?reference="+i.data.claimID}const z={filterEmptyKeys:V,hasSome:e,hasEvery:w,arrayIntersection:h,range:x,signaturePad:p,niCheckDisabled:r,selfAssesedClick:I,validate:c,criteriaFailed:y,stepForward:k,stepBack:a,scrollUp:u,clearSignature:E,submit:O,computed:A,onMounted:M,ref:B,get axios(){return N},get state(){return s},get Reusable(){return U},ProgressStep:te,StepTitle:le,GreatNews:oe,RadioBox:se,RadioQuestion:re,AmountBox:ne,InputText:ie,InputSelect:de,get options(){return pe}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}},Ze=G(Le,[["render",Ge]]);L(Ze).use(Z).component("IconInfo",K).component("IconNext",X).component("IconPrevious",$).component("IconSelect",ee).component("HasError",me).component("NextButton",ue).component("BackButton",_e).component("VueFinalModal",ae).component("ModalMarkup",ce).mount("#app");
