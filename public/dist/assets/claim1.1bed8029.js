import{r as j,a as _,o as m,c,b as t,w as y,d as s,F as Y,e as H,f as P,n as J,t as W,g as B,v as S,h as v,_ as G,i as C,j as M,k as A,l as N,R as U,m as L,p as Q,I as Z,q as K,s as X,u as $,V as ee}from"./reuseable.ac086b66.js";import{_ as ae,a as te,G as le,b as oe,c as se,d as re,e as ne,f as ie,H as de,g as me,h as ue,i as _e}from"./InputSelect.b1954662.js";const T={year_1:null,year_2:null,year_3:null,year_4:null},R={title:null,first_name:null,last_name:null},D={day:null,month:null,year:null},o=j({url:"/ReclaimPPI/lead",step:1,showAssesmentModal:!1,showYearsInfoModal:!1,showNIModal:!1,loading:!1,self_assesment_message:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni_message:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years_message:"A rough estimate of amount you've received in pounds (\xA3)",errors:[],year:Object.keys(T),name:Object.keys(R),dob:Object.keys(D),steps:[{title:"PPI Claim Details",number:1},{title:"About You",number:2},{title:"Contact Details",number:3},{title:"Start Claim",number:4}],required:[["self_assesment","year","less_earning","ni_number"],["name","dob"],["email","phone","address","postcode","agree","signature"]],form:[{self_assesment:null,...T,less_earning:null,ni_number:null,cant_remember:null},{...R,...D},{email:null,phone:null,address:null,postcode:null,agree:null},{referral_code:null,signature:null}]}),ce=["Mr","Mrs","Miss","Ms","Dr"],fe=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],be={title:ce,months:fe},pe={class:"smodal"},ge={class:"smodal__body"},ye={class:"swizard"},ve={class:"sprogress-bar"},Ve={key:0,class:"swizard__step swizard_page1"},we=s("div",{class:"swizard__title"},[s("p",{class:"swizard__title__p"}," Please provide us with the TOTAL amount you received for your PPI refunds in the relevant tax years below: ")],-1),xe={class:"swizard__years",style:{position:"relative","z-index":"2"}},he={class:"swizard__input__item__right-icon ni-number"},Ie={class:"tooltip"},ke={class:"top"},ze=s("i",null,null,-1),Pe={class:"swizard__sign__checkbox"},Be=["disabled"],Se=s("label",{for:"cant_remember"},"Can't remember (Provide it later) ",-1),Ce={key:0,class:"swizard__submit"},Me={key:1,class:"swizard__step swizard_page2"},Ae={class:"swizard__about"},Ne=s("p",{style:{"margin-bottom":"5px","margin-top":"20px","font-weight":"bold"}},"DOB",-1),Ue={class:"swizard__about"},Te={class:"swizard__submit"},Re={key:2,class:"swizard__step swizard_page3"},De={class:"swizard__sign__checkbox",style:{"margin-top":"10px !important"}},Ee=s("label",{for:"agreed"},[s("small",null,"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes.")],-1),Oe={class:"swizard__submit"},Fe={key:3,class:"swizard__step swizard_page4"},qe={class:"swizard__input"},je=s("p",null,"Please draw your signature below in the green box.",-1),Ye={class:"swizard__input__item"},He={class:"swizard__submit"};function Je(E,l,V,e,w,x){const h=_("ModalMarkup"),p=_("vue-final-modal"),r=_("HasError"),I=_("IconInfo"),u=_("NextButton"),g=_("BackButton"),k=_("VueSignaturePad");return m(),c("div",pe,[t(p,{classes:"smodal__container","content-class":"smodal__content",modelValue:e.state.showAssesmentModal,"onUpdate:modelValue":l[0]||(l[0]=a=>e.state.showAssesmentModal=a)},{default:y(({close:a})=>[t(h,{title:"Warning!!!",text:e.state.self_assesment_message,onClose:a},null,8,["text","onClose"])]),_:1},8,["modelValue"]),s("div",ge,[s("div",ye,[s("div",ve,[(m(!0),c(Y,null,H(e.state.steps,(a,f)=>(m(),P(e.ProgressStep,{class:J({"is-last":e.state.steps.length==f+1,"is-first":f==0}),key:f,title:a.title,number:a.number,step:f+1,current:e.state.step},null,8,["class","title","number","step","current"]))),128))]),e.state.step==1?(m(),c("div",Ve,[t(e.StepTitle,{title:"Please enter your PPI Claim details"}),t(e.RadioQuestion,{style:{position:"relative","z-index":"1"},question:"Were you required to complete a Self-Assessment the year you got your PPI refund?",field:"self_assesment",errors:e.state.errors},{default:y(()=>[t(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":[l[1]||(l[1]=a=>e.state.form[0].self_assesment=a),e.selfAssesedClick],value:!0,label:"Yes"},null,8,["modelValue"]),t(e.RadioBox,{name:"self_assesment",modelValue:e.state.form[0].self_assesment,"onUpdate:modelValue":l[2]||(l[2]=a=>e.state.form[0].self_assesment=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),we,s("div",xe,[t(e.AmountBox,{modelValue:e.state.form[0].year_1,"onUpdate:modelValue":l[3]||(l[3]=a=>e.state.form[0].year_1=a),label:"Apr 2018 - Mar 2019",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(e.AmountBox,{modelValue:e.state.form[0].year_2,"onUpdate:modelValue":l[4]||(l[4]=a=>e.state.form[0].year_2=a),label:"Apr 2019 - Mar 2020",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(e.AmountBox,{modelValue:e.state.form[0].year_3,"onUpdate:modelValue":l[5]||(l[5]=a=>e.state.form[0].year_3=a),label:"Apr 2020 - Mar 2021",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(e.AmountBox,{modelValue:e.state.form[0].year_4,"onUpdate:modelValue":l[6]||(l[6]=a=>e.state.form[0].year_4=a),label:"Apr 2021 - Mar 2022",tooltip:e.state.years_message},null,8,["modelValue","tooltip"]),t(r,{field:"year",errors:e.state.errors,message:"Please fill at least one record"},null,8,["errors"])]),t(e.RadioQuestion,{style:{position:"relative","z-index":"1"},question:"Were you earning less than \xA350,000 a year at the time you received your PPI refund?",field:"less_earning",errors:e.state.errors},{default:y(()=>[t(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":l[7]||(l[7]=a=>e.state.form[0].less_earning=a),value:!0,label:"Yes"},null,8,["modelValue"]),t(e.RadioBox,{name:"less_earning",modelValue:e.state.form[0].less_earning,"onUpdate:modelValue":l[8]||(l[8]=a=>e.state.form[0].less_earning=a),value:!1,label:"No"},null,8,["modelValue"])]),_:1},8,["errors"]),t(e.InputText,{style:{position:"relative","z-index":"2"},label:"National insurance (NI) Number",modelValue:e.state.form[0].ni_number,"onUpdate:modelValue":l[9]||(l[9]=a=>e.state.form[0].ni_number=a)},{default:y(()=>[s("span",he,[s("div",Ie,[t(I),s("div",ke,[s("p",null,W(e.state.ni_message),1),ze])])])]),_:1},8,["modelValue"]),t(r,{field:"invalid_ni",errors:e.state.errors,message:"Invalid NI Number"},null,8,["errors"]),t(r,{field:"ni_number",errors:e.state.errors},null,8,["errors"]),s("div",Pe,[B(s("input",{id:"cant_remember",disabled:e.niCheckDisabled,type:"checkbox",value:!0,"onUpdate:modelValue":l[10]||(l[10]=a=>e.state.form[0].cant_remember=a)},null,8,Be),[[S,e.state.form[0].cant_remember]]),Se]),e.state.form[0].self_assesment?(m(),P(r,{key:1,style:{"text-align":"center"},field:"already_assessed",errors:["already_assessed"],message:e.state.self_assesment_message},null,8,["message"])):(m(),c("div",Ce,[t(u,{text:"Continue",onClick:e.stepForward})]))])):v("",!0),e.state.step==2?(m(),c("div",Me,[t(e.StepTitle,{title:"Please complete your details below to start your claim"}),s("div",Ae,[t(e.InputSelect,{class:"swizard__about__item",label:"Title",options:e.options.title,modelValue:e.state.form[1].title,"onUpdate:modelValue":l[11]||(l[11]=a=>e.state.form[1].title=a)},null,8,["options","modelValue"]),t(e.InputText,{class:"swizard__about__item",label:"First Name",modelValue:e.state.form[1].first_name,"onUpdate:modelValue":l[12]||(l[12]=a=>e.state.form[1].first_name=a)},null,8,["modelValue"]),t(e.InputText,{class:"swizard__about__item",label:"Last Name",modelValue:e.state.form[1].last_name,"onUpdate:modelValue":l[13]||(l[13]=a=>e.state.form[1].last_name=a)},null,8,["modelValue"])]),t(r,{field:"name",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),Ne,s("div",Ue,[t(e.InputSelect,{class:"swizard__about__item",label:"Day","in-select":"",options:e.range(1,1,31),modelValue:e.state.form[1].day,"onUpdate:modelValue":l[14]||(l[14]=a=>e.state.form[1].day=a)},null,8,["options","modelValue"]),t(e.InputSelect,{class:"swizard__about__item",label:"Month","in-select":"",options:e.options.months,modelValue:e.state.form[1].month,"onUpdate:modelValue":l[15]||(l[15]=a=>e.state.form[1].month=a)},null,8,["options","modelValue"]),t(e.InputSelect,{class:"swizard__about__item",label:"Year","in-select":"",options:e.range(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e.state.form[1].year,"onUpdate:modelValue":l[16]||(l[16]=a=>e.state.form[1].year=a)},null,8,["options","modelValue"])]),t(r,{field:"dob",errors:e.state.errors,message:"The above fields are required"},null,8,["errors"]),s("div",Te,[t(u,{text:"Continue",onClick:e.stepForward}),t(g,{text:"Back",onClick:e.stepBack})])])):v("",!0),e.state.step==3?(m(),c("div",Re,[t(e.StepTitle,{title:"Enter your contact details to claim your tax back"}),t(e.InputText,{type:"email",label:"Email",modelValue:e.state.form[2].email,"onUpdate:modelValue":l[17]||(l[17]=a=>e.state.form[2].email=a)},null,8,["modelValue"]),t(r,{field:"email",errors:e.state.errors},null,8,["errors"]),t(r,{field:"invalid_email",errors:e.state.errors,message:"Invalid Email"},null,8,["errors"]),t(e.InputText,{type:"tel",label:"Phone Number",modelValue:e.state.form[2].phone,"onUpdate:modelValue":l[18]||(l[18]=a=>e.state.form[2].phone=a)},null,8,["modelValue"]),t(r,{field:"phone",errors:e.state.errors},null,8,["errors"]),t(r,{field:"invalid_phone",errors:e.state.errors,message:"Invalid Phone Number"},null,8,["errors"]),t(e.InputText,{label:"Address",modelValue:e.state.form[2].address,"onUpdate:modelValue":l[19]||(l[19]=a=>e.state.form[2].address=a)},null,8,["modelValue"]),t(r,{field:"address",errors:e.state.errors},null,8,["errors"]),t(e.InputText,{label:"Postcode",modelValue:e.state.form[2].postcode,"onUpdate:modelValue":l[20]||(l[20]=a=>e.state.form[2].postcode=a)},null,8,["modelValue"]),t(r,{field:"postcode",errors:e.state.errors},null,8,["errors"]),s("div",De,[B(s("input",{id:"agreed",type:"checkbox",value:1,"onUpdate:modelValue":l[21]||(l[21]=a=>e.state.form[2].agree=a)},null,512),[[S,e.state.form[2].agree]]),Ee]),t(r,{field:"agree",errors:e.state.errors},null,8,["errors"]),s("div",Oe,[t(u,{text:"Continue",onClick:e.stepForward}),t(g,{text:"Back",onClick:e.stepBack})])])):v("",!0),e.state.step==4?(m(),c("div",Fe,[t(e.GreatNews),t(e.InputText,{label:"Do you have a referral code? (optional)",modelValue:e.state.form[3].referal_code,"onUpdate:modelValue":l[22]||(l[22]=a=>e.state.form[3].referal_code=a)},null,8,["modelValue"]),s("div",qe,[je,s("div",Ye,[t(k,{width:"100%",height:"200px",style:{border:"1px solid green","background-color":"white"},ref:"signaturePad"},null,512),t(r,{field:"signature",errors:e.state.errors,message:"Signature required"},null,8,["errors"])])]),s("small",{class:"clear-signature",onClick:e.clearSignature},"Clear Signature"),s("div",He,[t(u,{disabled:e.state.loading,"no-icon":"",text:e.state.loading?"Please Wait ---":"Start Your Claim",onClickOnce:e.submit},null,8,["disabled","text"]),t(g,{text:"Back",onClick:e.stepBack})])])):v("",!0)])])])}const We={__name:"App",setup(E,{expose:l}){l();const{filterEmptyKeys:V,hasSome:e,hasEvery:w,arrayIntersection:x,range:h}=U(),p=C(null);M(()=>{});const r=A(()=>{var d;return o.form[0].cant_remember=!1,(d=o.form[0].ni_number)==null?void 0:d.length});function I(){setTimeout(()=>{console.log(o.form[0]),o.showAssesmentModal=!0},0)}function u(){const d=Object.values(o.required[o.step-1]),n=o.form[o.step-1];d.includes("ni_number")&&n.cant_remember&&d.splice(d.indexOf("ni_number"),1);const b=V(n);let i=x(b,d);if(o.step==1){w(Object.values(o.year),b)&&i.push("year"),n.self_assesment&&i.push("already_assessed");var F=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");![null,""].includes(n.ni_number)&&!F.test(n.ni_number)&&i.push("invalid_ni")}if(o.step==2&&(e(Object.values(o.name),b)&&i.push("name"),e(Object.values(o.dob),b)&&i.push("dob")),o.step==3){var q=/\S+@\S+\.\S+/;n.email!=null&&!q.test(n.email)&&i.push("invalid_email"),n.phone!=null&&(n.phone.length!=11||n.phone.charAt(0)!="0")&&i.push("invalid_phone"),!n.agree&&!i.includes("agree")&&i.push("agree")}return o.errors=[...i],!o.errors.length}function g(){u()&&o.step>=1&&o.step<=4&&(o.step++,a())}function k(){o.step>1&&o.step<=4&&(o.step--,a())}function a(){document.getElementById("app").scrollIntoView()}function f(){p.value.clearSignature()}async function O(){const{isEmpty:d,data:n}=p.value.saveSignature();if(d){o.errors.push("signature");return}o.loading=!0,o.form[3].signature=n;const b={...o.form[0],...o.form[1],...o.form[2],...o.form[3]},i=await N.post(o.url,b);window.location.href="/thank-you?reference="+i.data.claimID}const z={filterEmptyKeys:V,hasSome:e,hasEvery:w,arrayIntersection:x,range:h,signaturePad:p,niCheckDisabled:r,selfAssesedClick:I,validate:u,stepForward:g,stepBack:k,scrollUp:a,clearSignature:f,submit:O,computed:A,onMounted:M,ref:C,get axios(){return N},get state(){return o},get Reusable(){return U},ProgressStep:ae,StepTitle:te,GreatNews:le,RadioBox:oe,RadioQuestion:se,AmountBox:re,InputText:ne,InputSelect:ie,get options(){return be}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}},Ge=G(We,[["render",Je]]);L(Ge).use(Q).component("IconInfo",Z).component("IconNext",K).component("IconPrevious",X).component("IconSelect",$).component("HasError",de).component("NextButton",me).component("BackButton",ue).component("VueFinalModal",ee).component("ModalMarkup",_e).mount("#app");
