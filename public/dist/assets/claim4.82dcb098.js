import{r as U,k as S,a as n,o as x,c as k,b as t,d as a,F as N,w as E,A as e,t as R,f as M,h as q,R as j,i as O,e as J,_ as W,j as K,l as F,m as L,p as G,I as Z,q as Q,s as X,u as ee,E as te}from"./reuseable.a5966b59.js";import{_ as $,G as se,a as oe,H as le,b as re,c as ae,d as ne,e as ie,f as ue,g as de,h as me,i as ce,j as pe}from"./ProgressStep.7e693d13.js";const _e=["Mr","Mrs","Miss","Ms","Dr"],fe=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],D={year_1:null,year_2:null,year_3:null,year_4:null},H={title:null,first_name:null,last_name:null},T={day:null,month:null,year:null},P={self_assessment:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years:"A rough estimate of amount you've received in pounds (\xA3)"},w=U({url:"/ReclaimPPI/lead",step:1,loading:!1,steps:[{title:"PPI Claim Details",number:1},{title:"About You",number:2},{title:"Contact Details",number:3},{title:"Start Claim",number:4}],form:[{self_assessment:null,...D,less_earning:null,ni_number:null,cant_remember:null},{...H,...T},{email:null,phone:null,address:null,postcode:null,agree:null},{referral_code:null,signature:null}]}),be={class:"mt-6 mb-4"},ye={class:"flex gap-5 justify-center mt-6"},ge=a("button",{type:"button",class:"border-red-600 border-solid border-2 font-medium text-red-600 flex items-center justify-center py-3 px-6 sm:py-4 sm:px-20 rounded"}," Yes ",-1),xe={__name:"criteria",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(h,{emit:i}){const b=h;return U({required:[],errors:[]}),S({get(){return b.modelValue},set(o){i("update:modelValue",o)}}),(o,V)=>{const d=n("step-title"),l=n("question");return x(),k(N,null,[t(d,{title:"Is the below statement true?"}),a("div",be,[t(l,{labelFor:"",class:"text-center",text:"I was Not self employed the year I received my PPI refund"}),a("div",ye,[ge,a("button",{onClick:V[0]||(V[0]=r=>o.$emit("forward")),type:"button",class:"bg-red-600 border-solid border-red-600 border-2 font-medium text-white flex items-center justify-center py-3 px-6 sm:py-4 sm:px-20 rounded"}," No ")])])],64)}}},Ve={class:"mt-6 mb-4"},ve={class:"flex my-2"},we={class:"mb-4"},he={class:"grid sm:grid-cols-2 sm:justify-items-center gap-x-6"},ke={class:"flex justify-start w-full mt-4"},Be={class:"mt-6 mb-4"},Ie={class:"flex my-2"},Ce={class:"mt-6 mb-2"},Pe={class:"absolute right-2 top-11 cursor-pointer group duration-300"},Ne={class:"absolute hidden group-hover:flex -left-[145px] sm:-left-[285px] -top-4 -translate-y-full sm:w-80 w-44 px-2 py-1 bg-gray-700 rounded-lg text-white text-sm after:content-[''] after:absolute after:right-[2%] after:top-[100%] after:-translate-x-1/2 after:border-8 after:border-x-transparent after:border-b-transparent after:border-t-gray-700"},qe={class:"mt-2"},Ue={class:"flex items-center mt-2 mb-6"},Se={class:"flex items-center justify-center"},$e={__name:"claim",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(h,{emit:i}){const b=h,{filterEmptyKeys:o,hasEvery:V,arrayIntersection:d}=j();let l=U({showAssessmentModal:!1,required:["self_assessment","years","less_earning","ni_number"],errors:[]});const r=S({get(){return console.log(b),b.modelValue},set(_){i("update:modelValue",_)}});function m(){const _=b.modelValue;let s=Object.values(l.required);s.includes("ni_number")&&_.cant_remember&&s.splice(s.indexOf("ni_number"),1);const p=o(_);let y=d(p,s);V(Object.keys(D),p)&&y.push("years"),_.self_assessment&&y.push("already_assessed");var B=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");return![null,""].includes(_.ni_number)&&!B.test(_.ni_number)&&y.push("invalid_ni"),l.errors=[...y],!l.errors.length}function c(){m()&&i("forward")}function f(){setTimeout(()=>{l.showAssessmentModal=!0},0)}return(_,s)=>{const p=n("ModalMarkup"),y=n("vue-final-modal"),B=n("step-title"),I=n("question"),g=n("radio-box"),C=n("HasError"),A=n("IconInfo"),v=n("input-text"),Y=n("sign-checkbox"),z=n("NextButton");return x(),k(N,null,[t(y,{classes:"flex justify-center items-center","content-class":"relative flex flex-col w-[500px] max-h-full mx-4 border dark:border-gray-800 rounded bg-white dark:bg-gray-900",modelValue:e(l).showAssessmentModal,"onUpdate:modelValue":s[0]||(s[0]=u=>e(l).showAssessmentModal=u)},{default:E(({close:u})=>[t(p,{title:"Warning!!!",text:e(P).self_assessment,onClose:u},null,8,["text","onClose"])]),_:1},8,["modelValue"]),t(B,{title:"Please enter your PPI Claim details"}),e(r)?(x(),k(N,{key:0},[a("div",Ve,[t(I,{labelFor:"",text:`Were you required to complete a Self-Assessment the
            year you got your PPI refund?`}),a("div",ve,[t(g,{name:"self_assessment",modelValue:e(r).self_assessment,"onUpdate:modelValue":[s[1]||(s[1]=u=>e(r).self_assessment=u),f],value:!0,label:"Yes"},null,8,["modelValue"]),t(g,{name:"self_assessment",modelValue:e(r).self_assessment,"onUpdate:modelValue":s[2]||(s[2]=u=>e(r).self_assessment=u),value:!1,label:"No"},null,8,["modelValue"])]),t(C,{field:"self_assessment",errors:e(l).errors},null,8,["errors"])]),a("div",we,[t(I,{text:`Please provide us with the TOTAL amount you
                received for your PPI refunds in the relevant tax
                years below:`}),a("div",he,[t($,{modelValue:e(r).year_1,"onUpdate:modelValue":s[3]||(s[3]=u=>e(r).year_1=u),label:"Apr 2018 - Mar 2020",tooltip:e(P).years},null,8,["modelValue","tooltip"]),t($,{modelValue:e(r).year_2,"onUpdate:modelValue":s[4]||(s[4]=u=>e(r).year_2=u),label:"Apr 2018 - Mar 2019",tooltip:e(P).years},null,8,["modelValue","tooltip"]),t($,{modelValue:e(r).year_3,"onUpdate:modelValue":s[5]||(s[5]=u=>e(r).year_3=u),label:"Apr 2018 - Mar 2019",tooltip:e(P).years},null,8,["modelValue","tooltip"]),t($,{modelValue:e(r).year_4,"onUpdate:modelValue":s[6]||(s[6]=u=>e(r).year_4=u),label:"Apr 2018 - Mar 2019",tooltip:e(P).years},null,8,["modelValue","tooltip"]),a("div",ke,[t(C,{field:"years",errors:e(l).errors,message:"Please fill at least one record"},null,8,["errors"])])])]),a("div",Be,[t(I,{text:`Were you earning less than \xA350,000 a year at the
                time you received your PPI refund?`}),a("div",Ie,[t(g,{name:"less_earning",modelValue:e(r).less_earning,"onUpdate:modelValue":s[7]||(s[7]=u=>e(r).less_earning=u),value:!0,label:"Yes"},null,8,["modelValue"]),t(g,{name:"less_earning",modelValue:e(r).less_earning,"onUpdate:modelValue":s[8]||(s[8]=u=>e(r).less_earning=u),value:!1,label:"No"},null,8,["modelValue"])]),t(C,{field:"less_earning",errors:e(l).errors},null,8,["errors"])]),a("div",Ce,[t(v,{label:"National insurance (NI) Number",modelValue:e(r).ni_number,"onUpdate:modelValue":s[9]||(s[9]=u=>e(r).ni_number=u)},{default:E(()=>[a("span",Pe,[t(A),a("span",Ne,R(e(P).ni),1)])]),_:1},8,["modelValue"]),a("div",qe,[t(C,{field:"invalid_ni",errors:e(l).errors,message:"Invalid NI Number"},null,8,["errors"]),t(C,{field:"ni_number",errors:e(l).errors},null,8,["errors"])])]),a("div",Ue,[t(Y,{modelValue:e(r).cant_remember,"onUpdate:modelValue":s[10]||(s[10]=u=>e(r).cant_remember=u),value:!0,label:"Can't remember (Provide it later)",disabled:_.niCheckDisabled},null,8,["modelValue","disabled"])]),a("div",Se,[e(r).self_assessment?(x(),M(C,{key:1,class:"text-center",field:"already_assessed",errors:["already_assessed"],message:e(P).self_assessment},null,8,["message"])):(x(),M(z,{key:0,text:"Continue",onClick:c}))])],64)):q("",!0)],64)}}},je={class:"flex flex-col sm:flex-row mt-6"},Ae={class:"basis-1/3 pr-2"},Me={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},Ee={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},Fe={class:"flex flex-col sm:flex-row"},Oe={class:"flex items-center justify-center flex-col"},De={__name:"about",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(h,{emit:i}){const b=h,{range:o,hasSome:V,filterEmptyKeys:d,arrayIntersection:l}=j();let r=U({required:["name","dob"],errors:[]});const m=S({get(){return console.log(b),b.modelValue},set(_){i("update:modelValue",_)}});function c(){const _=b.modelValue;let s=Object.values(r.required);const p=d(_);let y=l(p,s);return V(Object.keys(H),p)&&y.push("name"),V(Object.keys(T),p)&&y.push("dob"),r.errors=[...y],!r.errors.length}function f(){c()&&i("forward")}return(_,s)=>{const p=n("step-title"),y=n("input-select"),B=n("input-text"),I=n("HasError"),g=n("question"),C=n("NextButton"),A=n("BackButton");return x(),k(N,null,[t(p,{title:"Please complete your details below to start your claim"}),a("div",je,[a("div",Ae,[t(y,{class:"",label:"Title",options:e(_e),modelValue:e(m).title,"onUpdate:modelValue":s[0]||(s[0]=v=>e(m).title=v)},null,8,["options","modelValue"])]),a("div",Me,[t(B,{class:"",label:"First Name",modelValue:e(m).first_name,"onUpdate:modelValue":s[1]||(s[1]=v=>e(m).first_name=v)},null,8,["modelValue"])]),a("div",Ee,[t(B,{class:"",label:"Last Name",modelValue:e(m).last_name,"onUpdate:modelValue":s[2]||(s[2]=v=>e(m).last_name=v)},null,8,["modelValue"])])]),t(I,{class:"mt-1",field:"name",errors:e(r).errors,message:"The above fields are required"},null,8,["errors"]),t(g,{class:"mt-6",text:"DOB"}),a("div",Fe,[t(y,{class:"basis-1/3 pr-2",label:"Day","in-select":"",options:e(o)(1,1,31),modelValue:e(m).day,"onUpdate:modelValue":s[3]||(s[3]=v=>e(m).day=v)},null,8,["options","modelValue"]),t(y,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Month","in-select":"",options:e(fe),modelValue:e(m).month,"onUpdate:modelValue":s[4]||(s[4]=v=>e(m).month=v)},null,8,["options","modelValue"]),t(y,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Year","in-select":"",options:e(o)(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e(m).year,"onUpdate:modelValue":s[5]||(s[5]=v=>e(m).year=v)},null,8,["options","modelValue"])]),t(I,{class:"mt-1",field:"dob",errors:e(r).errors,message:"The above fields are required"},null,8,["errors"]),a("div",Oe,[t(C,{class:"mt-8 mb-2",text:"Continue",onClick:f}),t(A,{class:"font-bold",text:"Back",onClick:s[6]||(s[6]=v=>_.$emit("backward"))})])],64)}}},He={class:"mt-6"},Te={class:"mt-6"},Ye={class:"mt-6"},ze={class:"mt-6"},Re={class:"flex items-center mt-4 text-sm"},Je={class:"flex items-center justify-center flex-col mt-7"},We={__name:"contact",props:{modelValue:{type:Object,required:!0},messages:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(h,{emit:i}){const b=h,{filterEmptyKeys:o,arrayIntersection:V}=j();let d=U({required:["email","phone","address","postcode","agree","signature"],errors:[]});const l=S({get(){return console.log(b),b.modelValue},set(c){i("update:modelValue",c)}});function r(){const c=b.modelValue;let f=Object.values(d.required);const _=o(c);let s=V(_,f);var p=/\S+@\S+\.\S+/;return c.email!=null&&!p.test(c.email)&&s.push("invalid_email"),c.phone!=null&&(c.phone.length!=11||c.phone.charAt(0)!="0")&&s.push("invalid_phone"),!c.agree&&!s.includes("agree")&&s.push("agree"),d.errors=[...s],!d.errors.length}function m(){r()&&i("forward")}return(c,f)=>{const _=n("step-title"),s=n("input-text"),p=n("HasError"),y=n("sign-checkbox"),B=n("NextButton"),I=n("BackButton");return x(),k(N,null,[t(_,{title:"Enter your contact details to claim your tax back"}),a("div",null,[a("div",He,[t(s,{type:"email",label:"Email",modelValue:e(l).email,"onUpdate:modelValue":f[0]||(f[0]=g=>e(l).email=g)},null,8,["modelValue"]),t(p,{class:"mt-1",field:"email",errors:e(d).errors},null,8,["errors"]),t(p,{class:"mt-1",field:"invalid_email",errors:e(d).errors,message:"Invalid Email"},null,8,["errors"])]),a("div",Te,[t(s,{type:"tel",label:"Phone Number",modelValue:e(l).phone,"onUpdate:modelValue":f[1]||(f[1]=g=>e(l).phone=g)},null,8,["modelValue"]),t(p,{class:"mt-1",field:"phone",errors:e(d).errors},null,8,["errors"]),t(p,{class:"mt-1",field:"invalid_phone",errors:e(d).errors,message:"Invalid Phone Number"},null,8,["errors"])]),a("div",Ye,[t(s,{label:"Address",modelValue:e(l).address,"onUpdate:modelValue":f[2]||(f[2]=g=>e(l).address=g)},null,8,["modelValue"]),t(p,{class:"mt-1",field:"address",errors:e(d).errors},null,8,["errors"])]),a("div",ze,[t(s,{label:"Postcode",modelValue:e(l).postcode,"onUpdate:modelValue":f[3]||(f[3]=g=>e(l).postcode=g)},null,8,["modelValue"]),t(p,{class:"mt-1",field:"postcode",errors:e(d).errors},null,8,["errors"])])]),a("div",Re,[t(y,{modelValue:e(l).agree,"onUpdate:modelValue":f[4]||(f[4]=g=>e(l).agree=g),value:!0,label:"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes."},null,8,["modelValue"])]),t(p,{class:"mt-2",field:"agree",errors:e(d).errors},null,8,["errors"]),a("div",Je,[t(B,{text:"Continue",onClick:m}),t(I,{text:"Back",onClick:f[5]||(f[5]=g=>c.$emit("backward"))})])],64)}}},Ke={class:"mt-6 mb-1"},Le=a("p",{class:"mb-1"}," Please draw your signature below in the green box. ",-1),Ge={class:""},Ze={class:"flex items-center justify-center flex-col mt-8"},Qe={__name:"start-claim",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["update:modelValue","forward"],setup(h,{emit:i}){const b=h,o=O(null);let V=U({errors:[]});function d(){o.value.clearSignature()}function l(){const{isEmpty:m,data:c}=o.value.saveSignature();if(m){V.errors.push("signature");return}r.signature=c,i("forward")}const r=S({get(){return console.log(b),b.modelValue},set(m){i("update:modelValue",m)}});return(m,c)=>{const f=n("input-text"),_=n("VueSignaturePad"),s=n("HasError"),p=n("NextButton"),y=n("BackButton");return x(),k(N,null,[t(se),t(f,{label:"Do you have a referral code? (optional)",modelValue:e(r).referral_code,"onUpdate:modelValue":c[0]||(c[0]=B=>e(r).referral_code=B)},null,8,["modelValue"]),a("div",Ke,[Le,a("div",Ge,[t(_,{class:"w-full bg-white border border-green-500 rounded",ref_key:"signaturePad",ref:o},null,512),t(s,{class:"mt-2",field:"signature",errors:e(V).errors,message:"Signature required"},null,8,["errors"])])]),a("small",{class:"font-bold cursor-pointer",onClick:d},"Clear Signature"),a("div",Ze,[t(p,{disabled:h.loading,"no-icon":"",text:h.loading?"Please Wait ---":"Start Your Claim",onClick:l},null,8,["disabled","text"]),t(y,{text:"Back",onClick:c[1]||(c[1]=B=>m.$emit("backward"))})])],64)}}},Xe={class:"relative left-1/2 -translate-x-1/2 w-[97vw] md:w-[99vw]"},et={class:"max-w-[1000px] mx-auto"},tt={class:"p-3 mx-auto"},st={class:"flex items-center"},ot={class:"max-w-[700px] mx-auto mt-20 bg-orange-50 py-5 px-5 lg:px-7 box-border"},lt={key:0,class:"swizard_page1"},rt={key:1,class:"swizard_page1"},at={key:2,class:"swizard_page2"},nt={key:3,class:"swizard_page3"},it={key:4,class:"swizard_page4"};function ut(h,i,b,o,V,d){return x(),k("div",Xe,[a("div",et,[a("div",tt,[a("div",st,[(x(!0),k(N,null,J(o.state.steps,(l,r)=>(x(),M(o.ProgressStep,{"is-last":o.state.steps.length==r+1,key:r,title:l.title,number:l.number,step:r+1,current:o.state.step},null,8,["is-last","title","number","step","current"]))),128))]),a("div",ot,[o.state.step==1?(x(),k("div",lt,[t(o.Criteria,{onForward:o.stepForward})])):q("",!0),o.state.step==2?(x(),k("div",rt,[t(o.Claim,{modelValue:o.state.form[0],"onUpdate:modelValue":i[0]||(i[0]=l=>o.state.form[0]=l),onForward:o.stepForward},null,8,["modelValue"])])):q("",!0),o.state.step==3?(x(),k("div",at,[t(o.About,{modelValue:o.state.form[1],"onUpdate:modelValue":i[1]||(i[1]=l=>o.state.form[1]=l),onForward:o.stepForward,onBackward:o.stepBack},null,8,["modelValue"])])):q("",!0),o.state.step==4?(x(),k("div",nt,[t(o.Contact,{modelValue:o.state.form[2],"onUpdate:modelValue":i[2]||(i[2]=l=>o.state.form[2]=l),onForward:o.stepForward,onBackward:o.stepBack},null,8,["modelValue"])])):q("",!0),o.state.step==5?(x(),k("div",it,[t(o.StartClaim,{modelValue:o.state.form[3],"onUpdate:modelValue":i[3]||(i[3]=l=>o.state.form[3]=l),onForward:o.submit,onBackward:o.stepBack,loading:o.state.loading},null,8,["modelValue","loading"])])):q("",!0)])])])])}const dt={__name:"App",setup(h,{expose:i}){i();function b(){w.step>=1&&w.step<=4&&w.step++}function o(){w.step>1&&w.step<=4&&w.step--}async function V(){w.loading=!0;const l={...w.form[0],...w.form[1],...w.form[2],...w.form[3]},r=await F.post(w.url,l);w.loading=!1,window.location.href="/thank-you?reference="+r.data.claimID}const d={stepForward:b,stepBack:o,submit:V,computed:S,onMounted:K,ref:O,axios:F,state:w,Reusable:j,Criteria:xe,Claim:$e,About:De,Contact:We,StartClaim:Qe,ProgressStep:oe};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},mt=W(dt,[["render",ut]]);L(mt).use(G).component("IconInfo",Z).component("IconNext",Q).component("IconPrevious",X).component("IconSelect",ee).component("HasError",le).component("NextButton",re).component("BackButton",ae).component("VueFinalModal",te).component("ModalMarkup",ne).component("RadioBox",ie).component("Question",ue).component("InputText",de).component("InputSelect",me).component("SignCheckbox",ce).component("StepTitle",pe).mount("#app");
