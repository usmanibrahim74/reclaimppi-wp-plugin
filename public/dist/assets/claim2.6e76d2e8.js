import{r as S,k as q,a as n,o as x,c as B,b as t,w as j,A as e,F as U,d as r,t as z,f as M,h as N,R as $,i as F,e as J,_ as W,j as K,l as O,m as L,p as G,I as Z,q as Q,s as X,u as ee,E as te}from"./reuseable.6619a4c7.js";import{_ as A,a as se,b as le,H as oe,c as ae,d as re,e as ne,f as ie,g as ue,h as de,i as me,j as ce,k as pe}from"./ProgressStep.92a4f3b7.js";import{G as _e}from"./GreatNews.9dea2eb4.js";const fe=["Mr","Mrs","Miss","Ms","Dr"],be=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],D={year_1:null,year_2:null,year_3:null,year_4:null},H={title:null,first_name:null,last_name:null},T={day:null,month:null,year:null},P={self_assessment:"Unfortunately we can\u2019t proceed with your claim and you will have to contact your accountant to do this for you.",ni:"NI Number is required to identify your tax information with HMRC. Example JJ123456C",years:"A rough estimate of amount you've received in pounds (\xA3)"},v=S({url:"/ReclaimPPI/lead",step:1,loading:!1,steps:[{title:"PPI Claim Details",number:1},{title:"About You",number:2},{title:"Contact Details",number:3},{title:"Start Claim",number:4}],form:[{self_assessment:null,...D,less_earning:null,ni_number:null,cant_remember:null},{...H,...T},{email:null,phone:null,address:null,postcode:null,agree:null},{referral_code:null,signature:null}]}),ye={class:"mt-6 mb-4"},ge={class:"flex my-2"},xe={class:"mb-4"},Ve={class:"grid sm:grid-cols-2 sm:justify-items-center gap-x-6"},ve={class:"flex justify-start w-full mt-4"},we={class:"mt-6 mb-4"},ke={class:"flex my-2"},he={class:"mt-6 mb-2"},Be={class:"absolute right-2 top-11 cursor-pointer group duration-300"},Ie={class:"absolute hidden group-hover:flex -left-[145px] sm:-left-[285px] -top-4 -translate-y-full sm:w-80 w-44 px-2 py-1 bg-gray-700 rounded-lg text-white text-sm after:content-[''] after:absolute after:right-[2%] after:top-[100%] after:-translate-x-1/2 after:border-8 after:border-x-transparent after:border-b-transparent after:border-t-gray-700"},Ce={class:"mt-2"},Pe={class:"flex items-center mt-2 mb-6"},Ne={class:"flex items-center justify-center"},Ue={__name:"claim",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(w,{emit:u}){const y=w,{filterEmptyKeys:l,hasEvery:k,arrayIntersection:_}=$();let a=S({showAssessmentModal:!1,required:["self_assessment","years","less_earning","ni_number"],errors:[]});const o=q({get(){return console.log(y),y.modelValue},set(p){u("update:modelValue",p)}});function d(){const p=y.modelValue;let s=Object.values(a.required);s.includes("ni_number")&&p.cant_remember&&s.splice(s.indexOf("ni_number"),1);const c=l(p);let b=_(c,s);k(Object.keys(D),c)&&b.push("years"),p.self_assessment&&b.push("already_assessed");var h=new RegExp("^[a-zA-Z]{2}[0-9]{6}[a-zA-Z]{1}$");return![null,""].includes(p.ni_number)&&!h.test(p.ni_number)&&b.push("invalid_ni"),a.errors=[...b],!a.errors.length}function m(){d()&&u("forward")}function f(){setTimeout(()=>{a.showAssessmentModal=!0},0)}return(p,s)=>{const c=n("ModalMarkup"),b=n("vue-final-modal"),h=n("step-title"),I=n("question"),g=n("radio-box"),C=n("HasError"),E=n("IconInfo"),V=n("input-text"),R=n("sign-checkbox"),Y=n("NextButton");return x(),B(U,null,[t(b,{classes:"flex justify-center items-center","content-class":"relative flex flex-col w-[500px] max-h-full mx-4 border dark:border-gray-800 rounded bg-white dark:bg-gray-900",modelValue:e(a).showAssessmentModal,"onUpdate:modelValue":s[0]||(s[0]=i=>e(a).showAssessmentModal=i)},{default:j(({close:i})=>[t(c,{title:"Warning!!!",text:e(P).self_assessment,onClose:i},null,8,["text","onClose"])]),_:1},8,["modelValue"]),t(h,{title:"Please enter your PPI Claim details"}),e(o)?(x(),B(U,{key:0},[r("div",ye,[t(I,{labelFor:"",text:`Were you required to complete a Self-Assessment the
            year you got your PPI refund?`}),r("div",ge,[t(g,{name:"self_assessment",modelValue:e(o).self_assessment,"onUpdate:modelValue":[s[1]||(s[1]=i=>e(o).self_assessment=i),f],value:!0,label:"Yes"},null,8,["modelValue"]),t(g,{name:"self_assessment",modelValue:e(o).self_assessment,"onUpdate:modelValue":s[2]||(s[2]=i=>e(o).self_assessment=i),value:!1,label:"No"},null,8,["modelValue"])]),t(C,{field:"self_assessment",errors:e(a).errors},null,8,["errors"])]),r("div",xe,[t(I,{text:`Please provide us with the TOTAL amount you
                received for your PPI refunds in the relevant tax
                years below:`}),r("div",Ve,[t(A,{modelValue:e(o).year_1,"onUpdate:modelValue":s[3]||(s[3]=i=>e(o).year_1=i),label:"Apr 2018 - Mar 2020",tooltip:e(P).years},null,8,["modelValue","tooltip"]),t(A,{modelValue:e(o).year_2,"onUpdate:modelValue":s[4]||(s[4]=i=>e(o).year_2=i),label:"Apr 2018 - Mar 2019",tooltip:e(P).years},null,8,["modelValue","tooltip"]),t(A,{modelValue:e(o).year_3,"onUpdate:modelValue":s[5]||(s[5]=i=>e(o).year_3=i),label:"Apr 2018 - Mar 2019",tooltip:e(P).years},null,8,["modelValue","tooltip"]),t(A,{modelValue:e(o).year_4,"onUpdate:modelValue":s[6]||(s[6]=i=>e(o).year_4=i),label:"Apr 2018 - Mar 2019",tooltip:e(P).years},null,8,["modelValue","tooltip"]),r("div",ve,[t(C,{field:"years",errors:e(a).errors,message:"Please fill at least one record"},null,8,["errors"])])])]),r("div",we,[t(I,{text:`Were you earning less than \xA350,000 a year at the
                time you received your PPI refund?`}),r("div",ke,[t(g,{name:"less_earning",modelValue:e(o).less_earning,"onUpdate:modelValue":s[7]||(s[7]=i=>e(o).less_earning=i),value:!0,label:"Yes"},null,8,["modelValue"]),t(g,{name:"less_earning",modelValue:e(o).less_earning,"onUpdate:modelValue":s[8]||(s[8]=i=>e(o).less_earning=i),value:!1,label:"No"},null,8,["modelValue"])]),t(C,{field:"less_earning",errors:e(a).errors},null,8,["errors"])]),r("div",he,[t(V,{label:"National insurance (NI) Number",modelValue:e(o).ni_number,"onUpdate:modelValue":s[9]||(s[9]=i=>e(o).ni_number=i)},{default:j(()=>[r("span",Be,[t(E),r("span",Ie,z(e(P).ni),1)])]),_:1},8,["modelValue"]),r("div",Ce,[t(C,{field:"invalid_ni",errors:e(a).errors,message:"Invalid NI Number"},null,8,["errors"]),t(C,{field:"ni_number",errors:e(a).errors},null,8,["errors"])])]),r("div",Pe,[t(R,{modelValue:e(o).cant_remember,"onUpdate:modelValue":s[10]||(s[10]=i=>e(o).cant_remember=i),value:!0,label:"Can't remember (Provide it later)",disabled:p.niCheckDisabled},null,8,["modelValue","disabled"])]),r("div",Ne,[e(o).self_assessment?(x(),M(C,{key:1,class:"text-center",field:"already_assessed",errors:["already_assessed"],message:e(P).self_assessment},null,8,["message"])):(x(),M(Y,{key:0,text:"Continue",onClick:m}))])],64)):N("",!0)],64)}}},Se={class:"flex flex-col sm:flex-row mt-6"},qe={class:"basis-1/3 pr-2"},Ae={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},Me={class:"basis-1/3 pr-2 mt-5 sm:mt-0"},$e={class:"flex flex-col sm:flex-row"},Ee={class:"flex items-center justify-center flex-col"},je={__name:"about",props:{modelValue:{type:Object,required:!0},messages:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(w,{emit:u}){const y=w,{range:l,hasSome:k,filterEmptyKeys:_,arrayIntersection:a}=$();let o=S({required:["name","dob"],errors:[]});const d=q({get(){return console.log(y),y.modelValue},set(p){u("update:modelValue",p)}});function m(){const p=y.modelValue;let s=Object.values(o.required);const c=_(p);let b=a(c,s);return k(Object.keys(H),c)&&b.push("name"),k(Object.keys(T),c)&&b.push("dob"),o.errors=[...b],!o.errors.length}function f(){m()&&u("forward")}return(p,s)=>{const c=n("step-title"),b=n("input-select"),h=n("input-text"),I=n("HasError"),g=n("question"),C=n("NextButton"),E=n("BackButton");return x(),B(U,null,[t(c,{title:"Please complete your details below to start your claim"}),r("div",Se,[r("div",qe,[t(b,{class:"",label:"Title",options:e(fe),modelValue:e(d).title,"onUpdate:modelValue":s[0]||(s[0]=V=>e(d).title=V)},null,8,["options","modelValue"])]),r("div",Ae,[t(h,{class:"",label:"First Name",modelValue:e(d).first_name,"onUpdate:modelValue":s[1]||(s[1]=V=>e(d).first_name=V)},null,8,["modelValue"])]),r("div",Me,[t(h,{class:"",label:"Last Name",modelValue:e(d).last_name,"onUpdate:modelValue":s[2]||(s[2]=V=>e(d).last_name=V)},null,8,["modelValue"])])]),t(I,{class:"mt-1",field:"name",errors:e(o).errors,message:"The above fields are required"},null,8,["errors"]),t(g,{class:"mt-6",text:"DOB"}),r("div",$e,[t(b,{class:"basis-1/3 pr-2",label:"Day","in-select":"",options:e(l)(1,1,31),modelValue:e(d).day,"onUpdate:modelValue":s[3]||(s[3]=V=>e(d).day=V)},null,8,["options","modelValue"]),t(b,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Month","in-select":"",options:e(be),modelValue:e(d).month,"onUpdate:modelValue":s[4]||(s[4]=V=>e(d).month=V)},null,8,["options","modelValue"]),t(b,{class:"basis-1/3 pr-2 mt-5 sm:mt-0",label:"Year","in-select":"",options:e(l)(new Date().getFullYear()-100,1,new Date().getFullYear()).reverse(),modelValue:e(d).year,"onUpdate:modelValue":s[5]||(s[5]=V=>e(d).year=V)},null,8,["options","modelValue"])]),t(I,{class:"mt-1",field:"dob",errors:e(o).errors,message:"The above fields are required"},null,8,["errors"]),r("div",Ee,[t(C,{class:"mt-8 mb-2",text:"Continue",onClick:f}),t(E,{class:"font-bold",text:"Back",onClick:s[6]||(s[6]=V=>p.$emit("backward"))})])],64)}}},Oe={class:"mt-6"},Fe={class:"mt-6"},De={class:"mt-6"},He={class:"mt-6"},Te={class:"flex items-center mt-4 text-sm"},Re={class:"flex items-center justify-center flex-col mt-7"},Ye={__name:"contact",props:{modelValue:{type:Object,required:!0},messages:{type:Object,required:!0}},emits:["update:modelValue","forward"],setup(w,{emit:u}){const y=w,{filterEmptyKeys:l,arrayIntersection:k}=$();let _=S({required:["email","phone","address","postcode","agree","signature"],errors:[]});const a=q({get(){return console.log(y),y.modelValue},set(m){u("update:modelValue",m)}});function o(){const m=y.modelValue;let f=Object.values(_.required);const p=l(m);let s=k(p,f);var c=/\S+@\S+\.\S+/;return m.email!=null&&!c.test(m.email)&&s.push("invalid_email"),m.phone!=null&&(m.phone.length!=11||m.phone.charAt(0)!="0")&&s.push("invalid_phone"),!m.agree&&!s.includes("agree")&&s.push("agree"),_.errors=[...s],!_.errors.length}function d(){o()&&u("forward")}return(m,f)=>{const p=n("step-title"),s=n("input-text"),c=n("HasError"),b=n("sign-checkbox"),h=n("NextButton"),I=n("BackButton");return x(),B(U,null,[t(p,{title:"Enter your contact details to claim your tax back"}),r("div",null,[r("div",Oe,[t(s,{type:"email",label:"Email",modelValue:e(a).email,"onUpdate:modelValue":f[0]||(f[0]=g=>e(a).email=g)},null,8,["modelValue"]),t(c,{class:"mt-1",field:"email",errors:e(_).errors},null,8,["errors"]),t(c,{class:"mt-1",field:"invalid_email",errors:e(_).errors,message:"Invalid Email"},null,8,["errors"])]),r("div",Fe,[t(s,{type:"tel",label:"Phone Number",modelValue:e(a).phone,"onUpdate:modelValue":f[1]||(f[1]=g=>e(a).phone=g)},null,8,["modelValue"]),t(c,{class:"mt-1",field:"phone",errors:e(_).errors},null,8,["errors"]),t(c,{class:"mt-1",field:"invalid_phone",errors:e(_).errors,message:"Invalid Phone Number"},null,8,["errors"])]),r("div",De,[t(s,{label:"Address",modelValue:e(a).address,"onUpdate:modelValue":f[2]||(f[2]=g=>e(a).address=g)},null,8,["modelValue"]),t(c,{class:"mt-1",field:"address",errors:e(_).errors},null,8,["errors"])]),r("div",He,[t(s,{label:"Postcode",modelValue:e(a).postcode,"onUpdate:modelValue":f[3]||(f[3]=g=>e(a).postcode=g)},null,8,["modelValue"]),t(c,{class:"mt-1",field:"postcode",errors:e(_).errors},null,8,["errors"])])]),r("div",Te,[t(b,{modelValue:e(a).agree,"onUpdate:modelValue":f[4]||(f[4]=g=>e(a).agree=g),value:!0,label:"I agree for Reclaim My PPI Tax to contact me with regards to any tax rebate purposes."},null,8,["modelValue"])]),t(c,{class:"mt-2",field:"agree",errors:e(_).errors},null,8,["errors"]),r("div",Re,[t(h,{text:"Continue",onClick:d}),t(I,{text:"Back",onClick:f[5]||(f[5]=g=>m.$emit("backward"))})])],64)}}},ze={class:"mt-6 mb-1"},Je=r("p",{class:"mb-1"},"Please draw your signature below in the green box.",-1),We={class:""},Ke={class:"flex items-center justify-center flex-col mt-8"},Le={__name:"start-claim",props:{modelValue:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["update:modelValue","forward"],setup(w,{emit:u}){const y=w,l=F(null);let k=S({errors:[]});function _(){l.value.clearSignature()}function a(){const{isEmpty:d,data:m}=l.value.saveSignature();if(d){k.errors.push("signature");return}o.signature=m,u("forward")}const o=q({get(){return console.log(y),y.modelValue},set(d){u("update:modelValue",d)}});return(d,m)=>{const f=n("input-text"),p=n("VueSignaturePad"),s=n("HasError"),c=n("NextButton"),b=n("BackButton");return x(),B(U,null,[w.loading?(x(),M(se,{key:0})):N("",!0),t(_e),t(f,{label:"Do you have a referral code? (optional)",modelValue:e(o).referral_code,"onUpdate:modelValue":m[0]||(m[0]=h=>e(o).referral_code=h)},null,8,["modelValue"]),r("div",ze,[Je,r("div",We,[t(p,{class:"w-full bg-white border border-green-500 rounded",ref_key:"signaturePad",ref:l},null,512),t(s,{class:"mt-2",field:"signature",errors:e(k).errors,message:"Signature required"},null,8,["errors"])])]),r("small",{class:"font-bold cursor-pointer",onClick:_},"Clear Signature"),r("div",Ke,[t(c,{disabled:w.loading,"no-icon":"",text:w.loading?"Please Wait ---":"Start Your Claim",onClick:a},null,8,["disabled","text"]),t(b,{text:"Back",onClick:m[1]||(m[1]=h=>d.$emit("backward"))})])],64)}}},Ge={class:"relative left-1/2 -translate-x-1/2 w-[97vw] md:w-[99vw]"},Ze={class:"max-w-[1000px] mx-auto"},Qe={class:"p-3 mx-auto"},Xe={class:"flex items-center"},et={class:"max-w-[700px] mx-auto mt-20 bg-orange-50 py-5 px-5 lg:px-7 box-border"},tt={key:0,class:"swizard_page1"},st={key:1,class:"swizard_page2"},lt={key:2,class:"swizard_page3"},ot={key:3,class:"swizard_page4"};function at(w,u,y,l,k,_){return x(),B("div",Ge,[r("div",Ze,[r("div",Qe,[r("div",Xe,[(x(!0),B(U,null,J(l.state.steps,(a,o)=>(x(),M(l.ProgressStep,{"is-last":l.state.steps.length==o+1,key:o,title:a.title,number:a.number,step:o+1,current:l.state.step},null,8,["is-last","title","number","step","current"]))),128))]),r("div",et,[l.state.step==1?(x(),B("div",tt,[t(l.Claim,{modelValue:l.state.form[0],"onUpdate:modelValue":u[0]||(u[0]=a=>l.state.form[0]=a),onForward:l.stepForward},null,8,["modelValue"])])):N("",!0),l.state.step==2?(x(),B("div",st,[t(l.About,{modelValue:l.state.form[1],"onUpdate:modelValue":u[1]||(u[1]=a=>l.state.form[1]=a),onForward:l.stepForward,onBackward:l.stepBack},null,8,["modelValue"])])):N("",!0),l.state.step==3?(x(),B("div",lt,[t(l.Contact,{modelValue:l.state.form[2],"onUpdate:modelValue":u[2]||(u[2]=a=>l.state.form[2]=a),onForward:l.stepForward,onBackward:l.stepBack},null,8,["modelValue"])])):N("",!0),l.state.step==4?(x(),B("div",ot,[t(l.StartClaim,{modelValue:l.state.form[3],"onUpdate:modelValue":u[3]||(u[3]=a=>l.state.form[3]=a),onForward:l.submit,onBackward:l.stepBack,loading:l.state.loading},null,8,["modelValue","loading"])])):N("",!0)])])])])}const rt={__name:"App",setup(w,{expose:u}){u();function y(){v.step>=1&&v.step<=4&&v.step++}function l(){v.step>1&&v.step<=4&&v.step--}async function k(){v.loading=!0;const a={externalID:window.location.href,...v.form[0],...v.form[1],...v.form[2],...v.form[3]},o=await O.post(v.url,a);v.loading=!1,window.location.href="/thank-you?reference="+o.data.claimID}const _={stepForward:y,stepBack:l,submit:k,computed:q,onMounted:K,ref:F,axios:O,state:v,Reusable:$,Claim:Ue,About:je,Contact:Ye,StartClaim:Le,ProgressStep:le};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},nt=W(rt,[["render",at]]);L(nt).use(G).component("IconInfo",Z).component("IconNext",Q).component("IconPrevious",X).component("IconSelect",ee).component("HasError",oe).component("NextButton",ae).component("BackButton",re).component("VueFinalModal",te).component("ModalMarkup",ne).component("RadioBox",ie).component("Question",ue).component("InputText",de).component("InputSelect",me).component("SignCheckbox",ce).component("StepTitle",pe).mount("#app");
